import{c4 as a,b$ as e,r as t,Q as l,dT as s,aY as o,cb as i,aG as c,ay as d,U as r,b1 as n,X as p,a2 as u,W as m,aE as y,x as h,I as f,A as g,a1 as b,D as v,b3 as x,bn as k,bp as T,b7 as j,c3 as w,c0 as C}from"./el-button.0a4ba32a.js";import{D as I,a1 as _,s as D,p as S}from"./main.858372aa.js";import{_ as L}from"./d-dialog.ed95f2b9.js";import{E as V}from"./el-skeleton-item.1896e7e8.js";import{E,a as z}from"./el-tabs.0374e920.js";import{I as U}from"./InfoFilled.df704379.js";import"./el-dialog.4b8a03dc.js";import"./el-overlay.ebdea840.js";import"./index.8dc67c0c.js";import"./typescript.72bf8adc.js";import"./index.c956e740.js";import"./plus.408c9cf2.js";const A={class:"topsearch-content hfull"},F={class:"d-flex-center",style:{height:"30px","flex-flow":"row"}},G={class:"pl20 pr20"},O={class:"d-layout hfull bt",style:{height:"calc(100% - 86px)"}},Q=["onClick"],W=["title"],X=["src"],Y={class:"d-layout-content mt10 d-auto-y ml20",style:""},$={class:"category-title d-flex-y bb"},q=["src"],B={class:"d-cell"},H={class:"topsearch-body"},J=["href"],K={class:"item-index mr10"},M=["title"],N={class:"f12 ml20 d-sub"},P={name:"appTopsearch"};var R=a(Object.assign(P,{setup(a){const P=e(),R=t({category:"全部",hotType:[],hostList:[],typeId:"",loading:!1,rowData:{}}),Z=l((()=>[{category:"全部"},...s(R.hotType,"category")])),aa=(a,e)=>{let t="取消订阅";if("add"==e){if(P.value.topSearch.length>4)return void w.error("最多只能选择5条");P.value.topSearch.push({name:a.name,id:a.id}),t="订阅成功"}else{if(P.value.topSearch.length<2)return void w.error("至少选择1条");let e=P.value.topSearch.findIndex((e=>e.id===a.id));P.value.topSearch.splice(e,1)}w.success(t)},ea=l((()=>P.value.topSearch.map((a=>a.id)))),ta=l((()=>"全部"!=R.category?R.hotType.filter((a=>a.category==R.category)):R.hotType));o((()=>ta.value),(a=>{R.typeId=a[0].id,R.rowData=a[0],la()}));function la(){R.loading=!0,i.getTopList({id:R.typeId}).then((a=>{R.hostList=a.data||[]})).finally((()=>{setTimeout((()=>{R.loading=!1}),100)}))}return(async()=>{let a=await S.get("searchTopCategory");a?R.hotType=a:i.getTopCategory().then((a=>{C.remove("searchTopCategory");let e=a.data||[];R.hotType=e,S.set("searchTopCategory",e,5184e5)}))})(),(a,e)=>{const t=c("el-icon");return d(),r(L,{height:"600px"},{default:n((()=>[p("div",A,[p("p",F,[u(I,{icon:"icon-hotsearch ",size:"80"})]),p("div",G,[u(h(z),{modelValue:h(R).category,"onUpdate:modelValue":e[0]||(e[0]=a=>h(R).category=a)},{default:n((()=>[(d(!0),m(f,null,y(h(Z),(a=>(d(),r(h(E),{label:a.category,name:a.category,key:a.key},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])]),p("div",O,[u(j,{name:"flip-list",tag:"ul",class:"d-layout-aside d-left-tabs"},{default:n((()=>[(d(!0),m(f,null,y(h(ta),(a=>(d(),m("li",{class:g(["d-left-tabs-item d-flex-between",{active:h(R).typeId==a.id}]),onClick:e=>function(a){R.rowData=a,R.typeId=a.id,la()}(a),key:a.id},[p("span",{title:a.name,class:"d-elip",style:{width:"102%"}},[p("img",{class:"icon",src:a.icon,alt:""},null,8,X),b(" "+v(a.name),1)],8,W),x(u(t,{title:"订阅在小组件上显示",class:"tabs-item-select"},{default:n((()=>[h(ea).includes(a.id)?(d(),r(h(D),{key:1,onClick:T((e=>aa(a,"del")),["stop"])},null,8,["onClick"])):(d(),r(h(_),{key:0,onClick:T((e=>aa(a,"add")),["stop"])},null,8,["onClick"]))])),_:2},1536),[[k,h(ea).includes(a.id)]])],10,Q)))),128))])),_:1}),p("div",Y,[p("h2",$,[p("img",{src:h(R).rowData.icon,alt:""},null,8,q),p("span",B,v(h(R).rowData.name)+" ‧ 热搜榜",1),u(t,{class:"mr20 d-sub",size:"16",title:"本热搜榜单所陈列的热点信息采集自于互联网，我们不对数据源做任何处理，服务器也不会存储任何数据, 链接均跳转至原始网页地址访问. 如果侵犯您的权益,请与我联系,我会尽快处理。同时请大家自行甄别信息真伪,原始网站信息不代表本人及本产品观点.谢谢大家支持."},{default:n((()=>[u(h(U))])),_:1})]),p("ul",H,[u(h(V),{loading:h(R).loading,rows:3,count:1,animated:""},{default:n((()=>[(d(!0),m(f,null,y(h(R).hostList,((a,e)=>(d(),m("a",{class:"topsearch-item d-flex-y",href:a.link,key:e,target:"_blank"},[p("span",K,v(a.index),1),p("span",{class:"d-felx d-cell d-elip",title:a.title},v(a.title),9,M),p("em",N,v(a.hotValue),1)],8,J)))),128))])),_:1},8,["loading"])])])])])])),_:1})}}}),[["__scopeId","data-v-089bd440"]]);export{R as default};
