import{c as t,e,p as o,S as i,r as n,n as a,_ as r,d as s,f as l,g as h,h as d,j as u,s as p,E as c,k as g,l as f,m as y,o as m,t as v,q as _,v as x,w,x as S,y as M,C as b,P as C,z as I,A as T,B as D,D as A,F as R,G as P,H as z,I as k,J as B,K as O,L,M as W,N as V,O as Z,Q as H,R as E,T as N,V as G,W as Y,X,Y as F,Z as U,$ as K,a0 as j,a1 as q,a2 as Q,a3 as J,a4 as $,a5 as tt,a6 as et,a7 as ot,a8 as it,a9 as nt,aa as at,ab as rt,ac as st,ad as lt,ae as ht,af as dt,ag as ut,ah as pt,ai as ct,aj as gt,ak as ft,al as yt,am as mt,an as vt,ao as _t,ap as xt,aq as wt,ar as St,as as Mt,at as bt,au as Ct,u as It,av as Tt,aw as Dt,ax as At,ay as Rt,az as Pt,aA as zt,aB as kt,aC as Bt,aD as Ot,aE as Lt,aF as Wt,aG as Vt,aH as Zt,aI as Ht,aJ as Et,aK as Nt,aL as Gt,aM as Yt,aN as Xt,aO as Ft,aP as Ut,aQ as Kt,aR as jt,aS as qt,aT as Qt}from"./install.e81c9494.js";var Jt="\0_ec_interaction_mutex";function $t(t,e){return!!function(t){return t[Jt]||(t[Jt]={})}(t)[e]}function te(t,e,o,i,n){t.pointerChecker&&t.pointerChecker(i,n.originX,n.originY)&&(p(i.event),ee(t,e,o,i,n))}function ee(t,e,o,i,n){n.isAvailableBehavior=s(oe,null,o,i),t.trigger(e,n)}function oe(t,e,o){var i=o[t];return!t||i&&(!u(i)||e.event[i+"Key"])}n({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},a);var ie=function(t){function e(e){var o=t.call(this)||this;o._zr=e;var i=s(o._mousedownHandler,o),n=s(o._mousemoveHandler,o),a=s(o._mouseupHandler,o),r=s(o._mousewheelHandler,o),d=s(o._pinchHandler,o);return o.enable=function(t,o){this.disable(),this._opt=l(h(o)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",i),e.on("mousemove",n),e.on("mouseup",a)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",r),e.on("pinch",d))},o.disable=function(){e.off("mousedown",i),e.off("mousemove",n),e.off("mouseup",a),e.off("mousewheel",r),e.off("pinch",d)},o}return r(e,t),e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!(d(t)||t.target&&t.target.draggable)){var e=t.offsetX,o=t.offsetY;this.pointerChecker&&this.pointerChecker(t,e,o)&&(this._x=e,this._y=o,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(this._dragging&&oe("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!$t(this._zr,"globalPan")){var e=t.offsetX,o=t.offsetY,i=this._x,n=this._y,a=e-i,r=o-n;this._x=e,this._y=o,this._opt.preventDefaultMouseMove&&p(t.event),ee(this,"pan","moveOnMouseMove",t,{dx:a,dy:r,oldX:i,oldY:n,newX:e,newY:o,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){d(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var e=oe("zoomOnMouseWheel",t,this._opt),o=oe("moveOnMouseWheel",t,this._opt),i=t.wheelDelta,n=Math.abs(i),a=t.offsetX,r=t.offsetY;if(0!==i&&(e||o)){if(e){var s=n>3?1.4:n>1?1.2:1.1;te(this,"zoom","zoomOnMouseWheel",t,{scale:i>0?s:1/s,originX:a,originY:r,isAvailableBehavior:null})}if(o){var l=Math.abs(i);te(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(i>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:a,originY:r,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){$t(this._zr,"globalPan")||te(this,"zoom",null,t,{scale:t.pinchScale>1?1.1:1/1.1,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})},e}(c);function ne(t,e,o,i,n,a){t=t||0;var r=o[1]-o[0];if(null!=n&&(n=re(n,[0,r])),null!=a&&(a=Math.max(a,null!=n?n:0)),"all"===i){var s=Math.abs(e[1]-e[0]);s=re(s,[0,r]),n=a=re(s,[n,a]),i=0}e[0]=re(e[0],o),e[1]=re(e[1],o);var l=ae(e,i);e[i]+=t;var h,d=n||0,u=o.slice();return l.sign<0?u[0]+=d:u[1]-=d,e[i]=re(e[i],u),h=ae(e,i),null!=n&&(h.sign!==l.sign||h.span<n)&&(e[1-i]=e[i]+l.sign*n),h=ae(e,i),null!=a&&h.span>a&&(e[1-i]=e[i]+h.sign*a),e}function ae(t,e){var o=t[e]-t[1-e];return{span:Math.abs(o),sign:o>0?-1:o<0?1:e?-1:1}}function re(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}var se=function(){function n(){}return n.prototype.getInitialData=function(n,a){var r,s,l=a.getComponent("xAxis",this.get("xAxisIndex")),h=a.getComponent("yAxis",this.get("yAxisIndex")),d=l.get("type"),u=h.get("type");"category"===d?(n.layout="horizontal",r=l.getOrdinalMeta(),s=!0):"category"===u?(n.layout="vertical",r=h.getOrdinalMeta(),s=!0):n.layout=n.layout||"horizontal";var p=["x","y"],c="horizontal"===n.layout?0:1,v=this._baseAxisDim=p[c],_=p[1-c],x=[l,h],w=x[c].get("type"),S=x[1-c].get("type"),M=n.data;if(M&&s){var b=[];g(M,(function(o,i){var n;t(o)?(n=o.slice(),o.unshift(i)):t(o.value)?((n=e({},o)).value=n.value.slice(),o.value.unshift(i)):n=o,b.push(n)})),n.data=b}var C=this.defaultValueDimensions,I=[{name:v,type:f(w),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:_,type:f(S),dimsDef:C.slice()}];return function(n,a,r){a=t(a)&&{coordDimensions:a}||e({encodeDefine:n.getEncode()},a);var s=n.getSource(),l=o(s,a).dimensions,h=new i(l,n);return h.initData(s,r),h}(this,{coordDimensions:I,dimensionsCount:C.length+1,encodeDefaulter:y(m,I,this)})},n.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},n}(),le=["color","borderColor"],he=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return r(e,t),e.prototype.render=function(t,e,o){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,e,o){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,e,o,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},e.prototype.eachRendered=function(t){v(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;null!=this._isLargeDraw&&e===this._isLargeDraw||(this._isLargeDraw=e,this._clear())},e.prototype._renderNormal=function(t){var e=t.getData(),o=this._data,i=this.group,n=e.getLayout("isSimpleBox"),a=t.get("clip",!0),r=t.coordinateSystem,s=r.getArea&&r.getArea();this._data||i.removeAll(),e.diff(o).add((function(o){if(e.hasValue(o)){var r=e.getItemLayout(o);if(a&&ce(s,r))return;var l=pe(r,o,!0);x(l,{shape:{points:r.ends}},t,o),ge(l,e,o,n),i.add(l),e.setItemGraphicEl(o,l)}})).update((function(r,l){var h=o.getItemGraphicEl(l);if(e.hasValue(r)){var d=e.getItemLayout(r);a&&ce(s,d)?i.remove(h):(h?(w(h,{shape:{points:d.ends}},t,r),S(h)):h=pe(d),ge(h,e,r,n),i.add(h),e.setItemGraphicEl(r,h))}else i.remove(h)})).remove((function(t){var e=o.getItemGraphicEl(t);e&&i.remove(e)})).execute(),this._data=e},e.prototype._renderLarge=function(t){this._clear(),ve(t,this.group);var e=t.get("clip",!0)?M(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,e){for(var o,i=e.getData(),n=i.getLayout("isSimpleBox");null!=(o=t.next());){var a=pe(i.getItemLayout(o));ge(a,i,o,n),a.incremental=!0,this.group.add(a),this._progressiveEls.push(a)}},e.prototype._incrementalRenderLarge=function(t,e){ve(e,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(b),de=function(){},ue=function(t){function e(e){var o=t.call(this,e)||this;return o.type="normalCandlestickBox",o}return r(e,t),e.prototype.getDefaultShape=function(){return new de},e.prototype.buildPath=function(t,e){var o=e.points;this.__simpleBox?(t.moveTo(o[4][0],o[4][1]),t.lineTo(o[6][0],o[6][1])):(t.moveTo(o[0][0],o[0][1]),t.lineTo(o[1][0],o[1][1]),t.lineTo(o[2][0],o[2][1]),t.lineTo(o[3][0],o[3][1]),t.closePath(),t.moveTo(o[4][0],o[4][1]),t.lineTo(o[5][0],o[5][1]),t.moveTo(o[6][0],o[6][1]),t.lineTo(o[7][0],o[7][1]))},e}(C);function pe(t,e,o){var i=t.ends;return new ue({shape:{points:o?fe(i,t):i},z2:100})}function ce(t,e){for(var o=!0,i=0;i<e.ends.length;i++)if(t.contain(e.ends[i][0],e.ends[i][1])){o=!1;break}return o}function ge(t,e,o,i){var n=e.getItemModel(o);t.useStyle(e.getItemVisual(o,"style")),t.style.strokeNoScale=!0,t.__simpleBox=i,I(t,n)}function fe(t,e){return _(t,(function(t){return(t=t.slice())[1]=e.initBaseline,t}))}var ye=function(){},me=function(t){function e(e){var o=t.call(this,e)||this;return o.type="largeCandlestickBox",o}return r(e,t),e.prototype.getDefaultShape=function(){return new ye},e.prototype.buildPath=function(t,e){for(var o=e.points,i=0;i<o.length;)if(this.__sign===o[i++]){var n=o[i++];t.moveTo(n,o[i++]),t.lineTo(n,o[i++])}else i+=3},e}(C);function ve(t,e,o,i){var n=t.getData().getLayout("largePoints"),a=new me({shape:{points:n},__sign:1});e.add(a);var r=new me({shape:{points:n},__sign:-1});e.add(r),_e(1,a,t),_e(-1,r,t),i&&(a.incremental=!0,r.incremental=!0),o&&o.push(a,r)}function _e(t,e,o,i){var n=o.get(["itemStyle",t>0?"borderColor":"borderColor0"])||o.get(["itemStyle",t>0?"color":"color0"]),a=o.getModel("itemStyle").getItemStyle(le);e.useStyle(a),e.style.fill=null,e.style.stroke=n}var xe=he,we=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],o}return r(e,t),e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,e,o){var i=e.getItemLayout(t);return i&&o.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(T);D(we,se,!0);var Se=we;function Me(e){e&&t(e.series)&&g(e.series,(function(t){A(t)&&"k"===t.type&&(t.type="candlestick")}))}var be=["itemStyle","borderColor"],Ce=["itemStyle","borderColor0"],Ie=["itemStyle","color"],Te=["itemStyle","color0"],De={seriesType:"candlestick",plan:R(),performRawSeries:!0,reset:function(t,o){function i(t,e){return e.get(t>0?Ie:Te)}function n(t,e){return e.get(t>0?be:Ce)}if(!o.isSeriesFiltered(t))return!t.pipelineContext.large&&{progress:function(t,o){for(var a;null!=(a=t.next());){var r=o.getItemModel(a),s=o.getItemLayout(a).sign,l=r.getItemStyle();l.fill=i(s,r),l.stroke=n(s,r)||l.fill;var h=o.ensureUniqueItemVisual(a,"style");e(h,l)}}}}};function Ae(t,e,o,i,n){return o>i?-1:o<i?1:e>0?t.get(n,e-1)<=i?1:-1:1}var Re={seriesType:"candlestick",plan:R(),reset:function(t){var e=t.coordinateSystem,o=t.getData(),i=function(t,e){var o,i=t.getBaseAxis(),n="category"===i.type?i.getBandWidth():(o=i.getExtent(),Math.abs(o[1]-o[0])/e.count()),a=P(B(t.get("barMaxWidth"),n),n),r=P(B(t.get("barMinWidth"),1),n),s=t.get("barWidth");return null!=s?P(s,n):Math.max(Math.min(n/2,a),r)}(t,o),n=["x","y"],a=o.getDimensionIndex(o.mapDimension(n[0])),r=_(o.mapDimensionsAll(n[1]),o.getDimensionIndex,o),s=r[0],l=r[1],h=r[2],d=r[3];if(o.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(a<0||r.length<4))return{progress:t.pipelineContext.large?function(t,o){var i,n,r=k(4*t.count),u=0,p=[],c=[],g=o.getStore();for(;null!=(n=t.next());){var f=g.get(a,n),y=g.get(s,n),m=g.get(l,n),v=g.get(h,n),_=g.get(d,n);isNaN(f)||isNaN(v)||isNaN(_)?(r[u++]=NaN,u+=3):(r[u++]=Ae(g,n,y,m,l),p[0]=f,p[1]=v,i=e.dataToPoint(p,null,c),r[u++]=i?i[0]:NaN,r[u++]=i?i[1]:NaN,p[1]=_,i=e.dataToPoint(p,null,c),r[u++]=i?i[1]:NaN)}o.setLayout("largePoints",r)}:function(t,o){var n,r=o.getStore();for(;null!=(n=t.next());){var u=r.get(a,n),p=r.get(s,n),c=r.get(l,n),g=r.get(h,n),f=r.get(d,n),y=Math.min(p,c),m=Math.max(p,c),v=M(y,u),_=M(m,u),x=M(g,u),w=M(f,u),S=[];b(S,_,0),b(S,v,1),S.push(I(w),I(_),I(x),I(v)),o.setItemLayout(n,{sign:Ae(r,n,p,c,l),initBaseline:p>c?_[1]:v[1],ends:S,brushRect:C(g,f,u)})}function M(t,o){var i=[];return i[0]=o,i[1]=t,isNaN(o)||isNaN(t)?[NaN,NaN]:e.dataToPoint(i)}function b(t,e,o){var n=e.slice(),a=e.slice();n[0]=z(n[0]+i/2,1,!1),a[0]=z(a[0]-i/2,1,!0),o?t.push(n,a):t.push(a,n)}function C(t,e,o){var n=M(t,o),a=M(e,o);return n[0]-=i/2,a[0]-=i/2,{x:n[0],y:n[1],width:i,height:a[1]-n[1]}}function I(t){return t[0]=z(t[0],1),t}}}}};function Pe(t){t.registerChartView(xe),t.registerSeriesModel(Se),t.registerPreprocessor(Me),t.registerVisual(De),t.registerLayout(Re)}var ze=["x","y","radius","angle","single"],ke=["cartesian2d","polar","singleAxis"];function Be(t){return t+"Axis"}function Oe(t,e){var o,i=O(),n=[],a=O();t.eachComponent({mainType:"dataZoom",query:e},(function(t){a.get(t.uid)||s(t)}));do{o=!1,t.eachComponent("dataZoom",r)}while(o);function r(t){!a.get(t.uid)&&function(t){var e=!1;return t.eachTargetAxis((function(t,o){var n=i.get(t);n&&n[o]&&(e=!0)})),e}(t)&&(s(t),o=!0)}function s(t){a.set(t.uid,!0),n.push(t),t.eachTargetAxis((function(t,e){(i.get(t)||i.set(t,[]))[e]=!0}))}return n}function Le(t){var e=t.ecModel,o={infoList:[],infoMap:O()};return t.eachTargetAxis((function(t,i){var n=e.getComponent(Be(t),i);if(n){var a=n.getCoordSysModel();if(a){var r=a.uid,s=o.infoMap.get(r);s||(s={model:a,axisModels:[]},o.infoList.push(s),o.infoMap.set(r,s)),s.axisModels.push(n)}}})),o}var We=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},t}();function Ve(t){var e={};return g(["start","end","startValue","endValue","throttle"],(function(o){t.hasOwnProperty(o)&&(e[o]=t[o])})),e}var Ze=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o._autoThrottle=!0,o._noTarget=!0,o._rangePropMode=["percent","percent"],o}return r(e,t),e.prototype.init=function(t,e,o){var i=Ve(t);this.settledOption=i,this.mergeDefaultAndTheme(t,o),this._doInit(i)},e.prototype.mergeOption=function(t){var e=Ve(t);W(this.option,t,!0),W(this.settledOption,e,!0),this._doInit(e)},e.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var o=this.settledOption;g([["start","startValue"],["end","endValue"]],(function(t,i){"value"===this._rangePropMode[i]&&(e[t[0]]=o[t[0]]=null)}),this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=O();this._fillSpecifiedTargetAxis(e)?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each((function(t){t.indexList.length&&(this._noTarget=!1)}),this)},e.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return g(ze,(function(o){var i=this.getReferringComponents(Be(o),V);if(i.specified){e=!0;var n=new We;g(i.models,(function(t){n.add(t.componentIndex)})),t.set(o,n)}}),this),e},e.prototype._fillAutoTargetAxisByOrient=function(t,e){var o=this.ecModel,i=!0;if(i){var n="vertical"===e?"y":"x";a(o.findComponents({mainType:n+"Axis"}),n)}i&&a(o.findComponents({mainType:"singleAxis",filter:function(t){return t.get("orient",!0)===e}}),"single");function a(e,o){var n=e[0];if(n){var a=new We;if(a.add(n.componentIndex),t.set(o,a),i=!1,"x"===o||"y"===o){var r=n.getReferringComponents("grid",Z).models[0];r&&g(e,(function(t){n.componentIndex!==t.componentIndex&&r===t.getReferringComponents("grid",Z).models[0]&&a.add(t.componentIndex)}))}}}i&&g(ze,(function(e){if(i){var n=o.findComponents({mainType:Be(e),filter:function(t){return"category"===t.get("type",!0)}});if(n[0]){var a=new We;a.add(n[0].componentIndex),t.set(e,a),i=!1}}}),this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis((function(e){!t&&(t=e)}),this),"y"===t?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var e=this._rangePropMode,o=this.get("rangeMode");g([["start","startValue"],["end","endValue"]],(function(i,n){var a=null!=t[i[0]],r=null!=t[i[1]];a&&!r?e[n]="percent":!a&&r?e[n]="value":o?e[n]=o[n]:a&&(e[n]="percent")}))},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis((function(e,o){null==t&&(t=this.ecModel.getComponent(Be(e),o))}),this),t},e.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each((function(o,i){g(o.indexList,(function(o){t.call(e,i,o)}))}))},e.prototype.getAxisProxy=function(t,e){var o=this.getAxisModel(t,e);if(o)return o.__dzAxisProxy},e.prototype.getAxisModel=function(t,e){var o=this._targetAxisInfoMap.get(t);if(o&&o.indexMap[e])return this.ecModel.getComponent(Be(t),e)},e.prototype.setRawRange=function(t){var e=this.option,o=this.settledOption;g([["start","startValue"],["end","endValue"]],(function(i){null==t[i[0]]&&null==t[i[1]]||(e[i[0]]=o[i[0]]=t[i[0]],e[i[1]]=o[i[1]]=t[i[1]])}),this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var e=this.option;g(["start","startValue","end","endValue"],(function(o){e[o]=t[o]}))},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var o=this.findRepresentativeAxisProxy();return o?o.getDataValueWindow():void 0},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,o=this._targetAxisInfoMap.keys(),i=0;i<o.length;i++)for(var n=o[i],a=this._targetAxisInfoMap.get(n),r=0;r<a.indexList.length;r++){var s=this.getAxisProxy(n,a.indexList[r]);if(s.hostedBy(this))return s;e||(e=s)}return e},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(H),He=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return r(e,t),e.prototype.render=function(t,e,o,i){this.dataZoomModel=t,this.ecModel=e,this.api=o},e.type="dataZoom",e}(E),Ee=g,Ne=F;var Ge=function(){function t(t,e,o,i){this._dimName=t,this._axisIndex=e,this.ecModel=i,this._dataZoomModel=o}return t.prototype.hostedBy=function(t){return this._dataZoomModel===t},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries((function(e){if(function(t){var e=t.get("coordinateSystem");return L(ke,e)>=0}(e)){var o=Be(this._dimName),i=e.getReferringComponents(o,Z).models[0];i&&this._axisIndex===i.componentIndex&&t.push(e)}}),this),t},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return h(this._minMaxSpan)},t.prototype.calculateDataWindow=function(t){var e,o=this._dataExtent,i=this.getAxisModel().axis.scale,n=this._dataZoomModel.getRangePropMode(),a=[0,100],r=[],s=[];Ee(["start","end"],(function(l,h){var d=t[l],u=t[l+"Value"];"percent"===n[h]?(null==d&&(d=a[h]),u=i.parse(N(d,a,o))):(e=!0,u=null==u?o[h]:i.parse(u),d=N(u,o,a)),s[h]=u,r[h]=d})),Ne(s),Ne(r);var l=this._minMaxSpan;function h(t,e,o,n,a){var r=a?"Span":"ValueSpan";ne(0,t,o,"all",l["min"+r],l["max"+r]);for(var s=0;s<2;s++)e[s]=N(t[s],o,n,!0),a&&(e[s]=i.parse(e[s]))}return e?h(s,r,o,a,!1):h(r,s,a,o,!0),{valueWindow:s,percentWindow:r}},t.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(t,e,o){var i=[1/0,-1/0];Ee(o,(function(t){Y(i,t.getData(),e)}));var n=t.getAxisModel(),a=X(n.axis.scale,n,i).calculate();return[a.min,a.max]}(this,this._dimName,e),this._updateMinMaxSpan();var o=this.calculateDataWindow(t.settledOption);this._valueWindow=o.valueWindow,this._percentWindow=o.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(t,e){if(t===this._dataZoomModel){var o=this._dimName,i=this.getTargetSeriesModels(),n=t.get("filterMode"),a=this._valueWindow;"none"!==n&&Ee(i,(function(t){var e=t.getData(),i=e.mapDimensionsAll(o);if(i.length){if("weakFilter"===n){var r=e.getStore(),s=_(i,(function(t){return e.getDimensionIndex(t)}),e);e.filterSelf((function(t){for(var e,o,n,l=0;l<i.length;l++){var h=r.get(s[l],t),d=!isNaN(h),u=h<a[0],p=h>a[1];if(d&&!u&&!p)return!0;d&&(n=!0),u&&(e=!0),p&&(o=!0)}return n&&e&&o}))}else Ee(i,(function(o){if("empty"===n)t.setData(e=e.map(o,(function(t){return function(t){return t>=a[0]&&t<=a[1]}(t)?t:NaN})));else{var i={};i[o]=a,e.selectRange(i)}}));Ee(i,(function(t){e.setApproximateExtent(a,t)}))}}))}},t.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,o=this._dataExtent;Ee(["min","max"],(function(i){var n=e.get(i+"Span"),a=e.get(i+"ValueSpan");null!=a&&(a=this.getAxisModel().axis.scale.parse(a)),null!=a?n=N(o[0]+a,o,[0,100],!0):null!=n&&(a=N(n,[0,100],o,!0)-o[0]),t[i+"Span"]=n,t[i+"ValueSpan"]=a}),this)},t.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,o=this._valueWindow;if(e){var i=G(o,[0,500]);i=Math.min(i,20);var n=t.axis.scale.rawExtentInfo;0!==e[0]&&n.setDeterminedMinMax("min",+o[0].toFixed(i)),100!==e[1]&&n.setDeterminedMinMax("max",+o[1].toFixed(i)),n.freeze()}},t}(),Ye={getTargetSeries:function(t){function e(e){t.eachComponent("dataZoom",(function(o){o.eachTargetAxis((function(i,n){var a=t.getComponent(Be(i),n);e(i,n,a,o)}))}))}e((function(t,e,o,i){o.__dzAxisProxy=null}));var o=[];e((function(e,i,n,a){n.__dzAxisProxy||(n.__dzAxisProxy=new Ge(e,i,a,t),o.push(n.__dzAxisProxy))}));var i=O();return g(o,(function(t){g(t.getTargetSeriesModels(),(function(t){i.set(t.uid,t)}))})),i},overallReset:function(t,e){t.eachComponent("dataZoom",(function(t){t.eachTargetAxis((function(e,o){t.getAxisProxy(e,o).reset(t)})),t.eachTargetAxis((function(o,i){t.getAxisProxy(o,i).filterData(t,e)}))})),t.eachComponent("dataZoom",(function(t){var e=t.findRepresentativeAxisProxy();if(e){var o=e.getDataPercentWindow(),i=e.getDataValueWindow();t.setCalculatedRange({start:o[0],end:o[1],startValue:i[0],endValue:i[1]})}}))}};var Xe=!1;function Fe(t){Xe||(Xe=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,Ye),function(t){t.registerAction("dataZoom",(function(t,e){var o=Oe(e,t);g(o,(function(e){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})}))}))}(t),t.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}var Ue=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return r(e,t),e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(H);function Ke(t){var e=t.get("confine");return null!=e?!!e:"richText"===t.get("renderMode")}function je(t){if(j.domSupported)for(var e=document.documentElement.style,o=0,i=t.length;o<i;o++)if(t[o]in e)return t[o]}var qe=je(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function Qe(t,e){if(!t)return e;e=q(e,!0);var o=t.indexOf(e);return(t=-1===o?e:"-"+t.slice(0,o)+"-"+e).toLowerCase()}var Je=Qe(je(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),$e=Qe(qe,"transform"),to="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(j.transform3dSupported?"will-change:transform;":"");function eo(t,e,o){var i=t.toFixed(0)+"px",n=e.toFixed(0)+"px";if(!j.transformSupported)return o?"top:"+n+";left:"+i+";":[["top",n],["left",i]];var a=j.transform3dSupported,r="translate"+(a?"3d":"")+"("+i+","+n+(a?",0":"")+")";return o?"top:0;left:0;"+$e+":"+r+";":[["top",0],["left",0],[qe,r]]}function oo(t,e,o){var i=[],n=t.get("transitionDuration"),a=t.get("backgroundColor"),r=t.get("shadowBlur"),s=t.get("shadowColor"),l=t.get("shadowOffsetX"),h=t.get("shadowOffsetY"),d=t.getModel("textStyle"),u=tt(t,"html"),p=l+"px "+h+"px "+r+"px "+s;return i.push("box-shadow:"+p),e&&n&&i.push(function(t,e){var o="cubic-bezier(0.23,1,0.32,1)",i=" "+t/2+"s "+o,n="opacity"+i+",visibility"+i;return e||(i=" "+t+"s "+o,n+=j.transformSupported?","+$e+i:",left"+i+",top"+i),Je+":"+n}(n,o)),a&&i.push("background-color:"+a),g(["width","color","radius"],(function(e){var o="border-"+e,n=q(o),a=t.get(n);null!=a&&i.push(o+":"+a+("color"===e?"":"px"))})),i.push(function(t){var e=[],o=t.get("fontSize"),i=t.getTextColor();i&&e.push("color:"+i),e.push("font:"+t.getFont()),o&&e.push("line-height:"+Math.round(3*o/2)+"px");var n=t.get("textShadowColor"),a=t.get("textShadowBlur")||0,r=t.get("textShadowOffsetX")||0,s=t.get("textShadowOffsetY")||0;return n&&a&&e.push("text-shadow:"+r+"px "+s+"px "+a+"px "+n),g(["decoration","align"],(function(o){var i=t.get(o);i&&e.push("text-"+o+":"+i)})),e.join(";")}(d)),null!=u&&i.push("padding:"+U(u).join("px ")+"px"),i.join(";")+";"}function io(t,e,o,i,n){var a=e&&e.painter;if(o){var r=a&&a.getViewportRoot();r&&et(t,r,document.body,i,n)}else{t[0]=i,t[1]=n;var s=a&&a.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var no=function(){function e(t,e,o){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,j.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var n=this._zr=e.getZr(),a=this._appendToBody=o&&o.appendToBody;io(this._styleCoord,n,a,e.getWidth()/2,e.getHeight()/2),a?document.body.appendChild(i):t.appendChild(i),this._container=t;var r=this;i.onmouseenter=function(){r._enterable&&(clearTimeout(r._hideTimeout),r._show=!0),r._inContent=!0},i.onmousemove=function(t){if(t=t||window.event,!r._enterable){var e=n.handler,o=n.painter.getViewportRoot();Q(o,t,!0),e.dispatch("mousemove",t)}},i.onmouseleave=function(){r._inContent=!1,r._enterable&&r._show&&r.hideLater(r._hideDelay)}}return e.prototype.update=function(t){var e,o,i,n=this._container,a=(o="position",(i=(e=n).currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e))?o?i[o]:i:null),r=n.style;"absolute"!==r.position&&"absolute"!==a&&(r.position="relative"),t.get("alwaysShowContent")&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var o=this.el,i=o.style,n=this._styleCoord;o.innerHTML?i.cssText=to+oo(t,!this._firstShow,this._longHide)+eo(n[0],n[1],!0)+"border-color:"+J(e)+";"+(t.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(e,o,i,n,a){var r=this.el;if(null!=e){var s="";if(u(a)&&"item"===i.get("trigger")&&!Ke(i)&&(s=function(t,e,o){if(!u(o)||"inside"===o)return"";var i=t.get("backgroundColor"),n=t.get("borderWidth");e=J(e);var a,r,s="left"===(a=o)?"right":"right"===a?"left":"top"===a?"bottom":"top",l=Math.max(1.5*Math.round(n),6),h="",d=$e+":";L(["left","right"],s)>-1?(h+="top:50%",d+="translateY(-50%) rotate("+(r="left"===s?-225:-45)+"deg)"):(h+="left:50%",d+="translateX(-50%) rotate("+(r="top"===s?225:45)+"deg)");var p=r*Math.PI/180,c=l+n,g=c*Math.abs(Math.cos(p))+c*Math.abs(Math.sin(p)),f=e+" solid "+n+"px;";return'<div style="'+["position:absolute;width:"+l+"px;height:"+l+"px;",(h+=";"+s+":-"+Math.round(100*((g-Math.SQRT2*n)/2+Math.SQRT2*n-(g-c)/2))/100+"px")+";"+d+";","border-bottom:"+f,"border-right:"+f,"background-color:"+i+";"].join("")+'"></div>'}(i,n,a)),u(e))r.innerHTML=e+s;else if(e){r.innerHTML="",t(e)||(e=[e]);for(var l=0;l<e.length;l++)$(e[l])&&e[l].parentNode!==r&&r.appendChild(e[l]);if(s&&r.childNodes.length){var h=document.createElement("div");h.innerHTML=s,r.appendChild(h)}}}else r.innerHTML=""},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,e){var o=this._styleCoord;if(io(o,this._zr,this._appendToBody,t,e),null!=o[0]&&null!=o[1]){var i=this.el.style,n=eo(o[0],o[1]);g(n,(function(t){i[t[0]]=t[1]}))}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},e.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",j.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout((function(){return t._longHide=!0}),500)},e.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(s(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();function ao(t){return Math.max(0,t)}function ro(t){var e=ao(t.shadowBlur||0),o=ao(t.shadowOffsetX||0),i=ao(t.shadowOffsetY||0);return{left:ao(e-o),right:ao(e+o),top:ao(e-i),bottom:ao(e+i)}}function so(t,e,o,i){t[0]=o,t[1]=i,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var lo=function(){function t(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),so(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return t.prototype.update=function(t){t.get("alwaysShowContent")&&this._moveIfResized()},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(t,e,o,i,n){var a=this;A(t)&&ot(""),this.el&&this._zr.remove(this.el);var r=o.getModel("textStyle");this.el=new it({style:{rich:e.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:r.get("textShadowColor"),fill:o.get(["textStyle","color"]),padding:tt(o,"richText"),verticalAlign:"top",align:"left"},z:o.get("z")}),g(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],(function(t){a.el.style[t]=o.get(t)})),g(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],(function(t){a.el.style[t]=r.get(t)||0})),this._zr.add(this.el);var s=this;this.el.on("mouseover",(function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0})),this.el.on("mouseout",(function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1}))},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),o=ro(t.style);return[e.width+o.left+o.right,e.height+o.top+o.bottom]},t.prototype.moveTo=function(t,e){var o=this.el;if(o){var i=this._styleCoord;so(i,this._zr,t,e),t=i[0],e=i[1];var n=o.style,a=ao(n.borderWidth||0),r=ro(n);o.x=t+a+r.left,o.y=e+a+r.top,o.markRedraw()}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(s(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}(),ho=new K({shape:{x:-1,y:-1,width:2,height:2}});function uo(t,e,o){var i,n=e.ecModel;o?(i=new Mt(o,n,n),i=new Mt(e.option,i,n)):i=e;for(var a=t.length-1;a>=0;a--){var r=t[a];r&&(r instanceof Mt&&(r=r.get("tooltip",!0)),u(r)&&(r={formatter:r}),r&&(i=new Mt(r,i,n)))}return i}function po(t,e){return t.dispatchAction||s(e.dispatchAction,e)}function co(t){return"center"===t||"middle"===t}var go=function(o){function i(){var t=null!==o&&o.apply(this,arguments)||this;return t.type=i.type,t}return r(i,o),i.prototype.init=function(t,e){if(!j.node&&e.getDom()){var o=t.getComponent("tooltip"),i=this._renderMode=nt(o.get("renderMode"));this._tooltipContent="richText"===i?new lo(e):new no(e.getDom(),e,{appendToBody:o.get("appendToBody",!0)})}},i.prototype.render=function(t,e,o){if(!j.node&&o.getDom()){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=o,this._alwaysShowContent=t.get("alwaysShowContent");var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&t.get("transitionDuration")?at(this,"_updatePosition",50,"fixRate"):rt(this,"_updatePosition")}},i.prototype._initGlobalListener=function(){var t=this._tooltipModel.get("triggerOn");st("itemTooltip",this._api,s((function(e,o,i){"none"!==t&&(t.indexOf(e)>=0?this._tryShow(o,i):"leave"===e&&this._hide(i))}),this))},i.prototype._keepShow=function(){var t=this._tooltipModel,e=this._ecModel,o=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout((function(){!o.isDisposed()&&i.manuallyShowTip(t,e,o,{x:i._lastX,y:i._lastY,dataByCoordSys:i._lastDataByCoordSys})}))}},i.prototype.manuallyShowTip=function(t,e,o,i){if(i.from!==this.uid&&!j.node&&o.getDom()){var n=po(i,o);this._ticket="";var a=i.dataByCoordSys,r=function(t,e,o){var i=bt(t).queryOptionMap,n=i.keys()[0];if(!n||"series"===n)return;var a,r=Ct(e,n,i.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(!r)return;if(o.getViewOfComponentModel(r).group.traverse((function(e){var o=lt(e).tooltipConfig;if(o&&o.name===t.name)return a=e,!0})),a)return{componentMainType:n,componentIndex:r.componentIndex,el:a}}(i,e,o);if(r){var s=r.el.getBoundingRect().clone();s.applyTransform(r.el.transform),this._tryShow({offsetX:s.x+s.width/2,offsetY:s.y+s.height/2,target:r.el,position:i.position,positionDefault:"bottom"},n)}else if(i.tooltip&&null!=i.x&&null!=i.y){var l=ho;l.x=i.x,l.y=i.y,l.update(),lt(l).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:l},n)}else if(a)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:a,tooltipOption:i.tooltipOption},n);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(t,e,o,i))return;var h=ht(i,e),d=h.point[0],u=h.point[1];null!=d&&null!=u&&this._tryShow({offsetX:d,offsetY:u,target:h.el,position:i.position,positionDefault:"bottom"},n)}else null!=i.x&&null!=i.y&&(o.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:o.getZr().findHover(i.x,i.y).target},n))}},i.prototype.manuallyHideTip=function(t,e,o,i){var n=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&n.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(po(i,o))},i.prototype._manuallyAxisShowTip=function(t,e,o,i){var n=i.seriesIndex,a=i.dataIndex,r=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=n&&null!=a&&null!=r){var s=e.getSeriesByIndex(n);if(s)if("axis"===uo([s.getData().getItemModel(a),s,(s.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return o.dispatchAction({type:"updateAxisPointer",seriesIndex:n,dataIndex:a,position:i.position}),!0}},i.prototype._tryShow=function(t,e){var o=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var i=t.dataByCoordSys;if(i&&i.length)this._showAxisTooltip(i,t);else if(o){var n,a;this._lastDataByCoordSys=null,dt(o,(function(t){return null!=lt(t).dataIndex?(n=t,!0):null!=lt(t).tooltipConfig?(a=t,!0):void 0}),!0),n?this._showSeriesItemTooltip(t,n,e):a?this._showComponentItemTooltip(t,a,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},i.prototype._showOrMove=function(t,e){var o=t.get("showDelay");e=s(e,this),clearTimeout(this._showTimout),o>0?this._showTimout=setTimeout(e,o):e()},i.prototype._showAxisTooltip=function(t,o){var i=this._ecModel,n=this._tooltipModel,a=[o.offsetX,o.offsetY],r=uo([o.tooltipOption],n),s=this._renderMode,l=[],h=ut("section",{blocks:[],noHeader:!0}),d=[],u=new pt;g(t,(function(t){g(t.dataByAxis,(function(t){var o=i.getComponent(t.axisDim+"Axis",t.axisIndex),a=t.value;if(o&&null!=a){var r=ct(a,o.axis,i,t.seriesDataIndices,t.valueLabelOpt),p=ut("section",{header:r,noHeader:!gt(r),sortBlocks:!0,blocks:[]});h.blocks.push(p),g(t.seriesDataIndices,(function(h){var c=i.getSeriesByIndex(h.seriesIndex),g=h.dataIndexInside,f=c.getDataParams(g);if(!(f.dataIndex<0)){f.axisDim=t.axisDim,f.axisIndex=t.axisIndex,f.axisType=t.axisType,f.axisId=t.axisId,f.axisValue=ft(o.axis,{value:a}),f.axisValueLabel=r,f.marker=u.makeTooltipMarker("item",J(f.color),s);var y=yt(c.formatTooltip(g,!0,null)),m=y.frag;if(m){var v=uo([c],n).get("valueFormatter");p.blocks.push(v?e({valueFormatter:v},m):m)}y.text&&d.push(y.text),l.push(f)}}))}}))})),h.blocks.reverse(),d.reverse();var p=o.position,c=r.get("order"),f=mt(h,u,s,c,i.get("useUTC"),r.get("textStyle"));f&&d.unshift(f);var y="richText"===s?"\n\n":"<br/>",m=d.join(y);this._showOrMove(r,(function(){this._updateContentNotChangedOnAxis(t,l)?this._updatePosition(r,p,a[0],a[1],this._tooltipContent,l):this._showTooltipContent(r,m,l,Math.random()+"",a[0],a[1],p,null,u)}))},i.prototype._showSeriesItemTooltip=function(t,o,i){var n=this._ecModel,a=lt(o),r=a.seriesIndex,s=n.getSeriesByIndex(r),l=a.dataModel||s,h=a.dataIndex,d=a.dataType,u=l.getData(d),p=this._renderMode,c=t.positionDefault,g=uo([u.getItemModel(h),l,s&&(s.coordinateSystem||{}).model],this._tooltipModel,c?{position:c}:null),f=g.get("trigger");if(null==f||"item"===f){var y=l.getDataParams(h,d),m=new pt;y.marker=m.makeTooltipMarker("item",J(y.color),p);var v=yt(l.formatTooltip(h,!1,d)),_=g.get("order"),x=g.get("valueFormatter"),w=v.frag,S=w?mt(x?e({valueFormatter:x},w):w,m,p,_,n.get("useUTC"),g.get("textStyle")):v.text,M="item_"+l.name+"_"+h;this._showOrMove(g,(function(){this._showTooltipContent(g,S,y,M,t.offsetX,t.offsetY,t.position,t.target,m)})),i({type:"showTip",dataIndexInside:h,dataIndex:u.getRawIndex(h),seriesIndex:r,from:this.uid})}},i.prototype._showComponentItemTooltip=function(t,e,o){var i=lt(e),n=i.tooltipConfig.option||{};if(u(n)){n={content:n,formatter:n}}var a=[n],r=this._ecModel.getComponent(i.componentMainType,i.componentIndex);r&&a.push(r),a.push({formatter:n.content});var s=t.positionDefault,l=uo(a,this._tooltipModel,s?{position:s}:null),d=l.get("content"),p=Math.random()+"",c=new pt;this._showOrMove(l,(function(){var o=h(l.get("formatterParams")||{});this._showTooltipContent(l,d,o,p,t.offsetX,t.offsetY,t.position,e,c)})),o({type:"showTip",from:this.uid})},i.prototype._showTooltipContent=function(e,o,i,n,a,r,l,h,d){if(this._ticket="",e.get("showContent")&&e.get("show")){var p=this._tooltipContent;p.setEnterable(e.get("enterable"));var c=e.get("formatter");l=l||e.get("position");var g=o,f=this._getNearestPoint([a,r],i,e.get("trigger"),e.get("borderColor")).color;if(c)if(u(c)){var y=e.ecModel.get("useUTC"),m=t(i)?i[0]:i;g=c,m&&m.axisType&&m.axisType.indexOf("time")>=0&&(g=vt(m.axisValue,g,y)),g=_t(g,i,!0)}else if(xt(c)){var v=s((function(t,o){t===this._ticket&&(p.setContent(o,d,e,f,l),this._updatePosition(e,l,a,r,p,i,h))}),this);this._ticket=n,g=c(i,n,v)}else g=c;p.setContent(g,d,e,f,l),p.show(e,f),this._updatePosition(e,l,a,r,p,i,h)}},i.prototype._getNearestPoint=function(e,o,i,n){return"axis"===i||t(o)?{color:n||("html"===this._renderMode?"#fff":"none")}:t(o)?void 0:{color:n||o.color||o.borderColor}},i.prototype._updatePosition=function(e,o,i,n,a,r,s){var l=this._api.getWidth(),h=this._api.getHeight();o=o||e.get("position");var d=a.getSize(),p=e.get("align"),c=e.get("verticalAlign"),g=s&&s.getBoundingRect().clone();if(s&&g.applyTransform(s.transform),xt(o)&&(o=o([i,n],r,a.el,g,{viewSize:[l,h],contentSize:d.slice()})),t(o))i=P(o[0],l),n=P(o[1],h);else if(A(o)){var f=o;f.width=d[0],f.height=d[1];var y=wt(f,{width:l,height:h});i=y.x,n=y.y,p=null,c=null}else if(u(o)&&s){var m=function(t,e,o,i){var n=o[0],a=o[1],r=Math.ceil(Math.SQRT2*i)+8,s=0,l=0,h=e.width,d=e.height;switch(t){case"inside":s=e.x+h/2-n/2,l=e.y+d/2-a/2;break;case"top":s=e.x+h/2-n/2,l=e.y-a-r;break;case"bottom":s=e.x+h/2-n/2,l=e.y+d+r;break;case"left":s=e.x-n-r,l=e.y+d/2-a/2;break;case"right":s=e.x+h+r,l=e.y+d/2-a/2}return[s,l]}(o,g,d,e.get("borderWidth"));i=m[0],n=m[1]}else{m=function(t,e,o,i,n,a,r){var s=o.getSize(),l=s[0],h=s[1];null!=a&&(t+l+a+2>i?t-=l+a:t+=a);null!=r&&(e+h+r>n?e-=h+r:e+=r);return[t,e]}(i,n,a,l,h,p?null:20,c?null:20);i=m[0],n=m[1]}if(p&&(i-=co(p)?d[0]/2:"right"===p?d[0]:0),c&&(n-=co(c)?d[1]/2:"bottom"===c?d[1]:0),Ke(e)){m=function(t,e,o,i,n){var a=o.getSize(),r=a[0],s=a[1];return t=Math.min(t+r,i)-r,e=Math.min(e+s,n)-s,t=Math.max(t,0),e=Math.max(e,0),[t,e]}(i,n,a,l,h);i=m[0],n=m[1]}a.moveTo(i,n)},i.prototype._updateContentNotChangedOnAxis=function(t,e){var o=this._lastDataByCoordSys,i=this._cbParamsList,n=!!o&&o.length===t.length;return n&&g(o,(function(o,a){var r=o.dataByAxis||[],s=(t[a]||{}).dataByAxis||[];(n=n&&r.length===s.length)&&g(r,(function(t,o){var a=s[o]||{},r=t.seriesDataIndices||[],l=a.seriesDataIndices||[];(n=n&&t.value===a.value&&t.axisType===a.axisType&&t.axisId===a.axisId&&r.length===l.length)&&g(r,(function(t,e){var o=l[e];n=n&&t.seriesIndex===o.seriesIndex&&t.dataIndex===o.dataIndex})),i&&g(t.seriesDataIndices,(function(t){var o=t.seriesIndex,a=e[o],r=i[o];a&&r&&r.data!==a.data&&(n=!1)}))}))})),this._lastDataByCoordSys=t,this._cbParamsList=e,!!n},i.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},i.prototype.dispose=function(t,e){!j.node&&e.getDom()&&(rt(this,"_updatePosition"),this._tooltipContent.dispose(),St("itemTooltip",e))},i.type="tooltip",i}(E);function fo(t){It(Tt),t.registerComponentModel(Ue),t.registerComponentView(go),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},a),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},a)}var yo=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o.layoutMode={type:"box",ignoreSize:!0},o}return r(e,t),e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(H),mo=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return r(e,t),e.prototype.render=function(t,e,o){if(this.group.removeAll(),t.get("show")){var i=this.group,n=t.getModel("textStyle"),a=t.getModel("subtextStyle"),r=t.get("textAlign"),s=B(t.get("textBaseline"),t.get("textVerticalAlign")),l=new it({style:Dt(n,{text:t.get("text"),fill:n.getTextColor()},{disableBox:!0}),z2:10}),h=l.getBoundingRect(),d=t.get("subtext"),u=new it({style:Dt(a,{text:d,fill:a.getTextColor(),y:h.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=t.get("link"),c=t.get("sublink"),g=t.get("triggerEvent",!0);l.silent=!p&&!g,u.silent=!c&&!g,p&&l.on("click",(function(){At(p,"_"+t.get("target"))})),c&&u.on("click",(function(){At(c,"_"+t.get("subtarget"))})),lt(l).eventData=lt(u).eventData=g?{componentType:"title",componentIndex:t.componentIndex}:null,i.add(l),d&&i.add(u);var f=i.getBoundingRect(),y=t.getBoxLayoutParams();y.width=f.width,y.height=f.height;var m=wt(y,{width:o.getWidth(),height:o.getHeight()},t.get("padding"));r||("middle"===(r=t.get("left")||t.get("right"))&&(r="center"),"right"===r?m.x+=m.width:"center"===r&&(m.x+=m.width/2)),s||("center"===(s=t.get("top")||t.get("bottom"))&&(s="middle"),"bottom"===s?m.y+=m.height:"middle"===s&&(m.y+=m.height/2),s=s||"top"),i.x=m.x,i.y=m.y,i.markRedraw();var v={align:r,verticalAlign:s};l.setStyle(v),u.setStyle(v),f=i.getBoundingRect();var _=m.margin,x=t.getItemStyle(["color","opacity"]);x.fill=t.get("backgroundColor");var w=new K({shape:{x:f.x-_[3],y:f.y-_[0],width:f.width+_[1]+_[3],height:f.height+_[0]+_[2],r:t.get("borderRadius")},style:x,subPixelOptimize:!0,silent:!0});i.add(w)}},e.type="title",e}(E);function vo(t){t.registerComponentModel(yo),t.registerComponentView(mo)}var _o=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.type,t.layoutMode={type:"box",ignoreSize:!0},t}return r(o,e),o.prototype.init=function(t,e,o){this.mergeDefaultAndTheme(t,o),t.selected=t.selected||{},this._updateSelector(t)},o.prototype.mergeOption=function(t,o){e.prototype.mergeOption.call(this,t,o),this._updateSelector(t)},o.prototype._updateSelector=function(e){var o=e.selector,i=this.ecModel;!0===o&&(o=e.selector=["all","inverse"]),t(o)&&g(o,(function(t,e){u(t)&&(t={type:t}),o[e]=W(t,function(t,e){return"all"===e?{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])}:"inverse"===e?{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(i,t.type))}))},o.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,o=0;o<t.length;o++){var i=t[o].get("name");if(this.isSelected(i)){this.select(i),e=!0;break}}!e&&this.select(t[0].get("name"))}},o.prototype._updateData=function(t){var e=[],o=[];t.eachRawSeries((function(i){var n,a=i.name;if(o.push(a),i.legendVisualProvider){var r=i.legendVisualProvider.getAllNames();t.isSeriesFiltered(i)||(o=o.concat(r)),r.length?e=e.concat(r):n=!0}else n=!0;n&&Rt(i)&&e.push(i.name)})),this._availableNames=o;var i=this.get("data")||e,n=_(i,(function(t){return(u(t)||Pt(t))&&(t={name:t}),new Mt(t,this,this.ecModel)}),this);this._data=n},o.prototype.getData=function(){return this._data},o.prototype.select=function(t){var e=this.option.selected;if("single"===this.get("selectedMode")){var o=this._data;g(o,(function(t){e[t.get("name")]=!1}))}e[t]=!0},o.prototype.unSelect=function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},o.prototype.toggleSelected=function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},o.prototype.allSelect=function(){var t=this._data,e=this.option.selected;g(t,(function(t){e[t.get("name",!0)]=!0}))},o.prototype.inverseSelect=function(){var t=this._data,e=this.option.selected;g(t,(function(t){var o=t.get("name",!0);e.hasOwnProperty(o)||(e[o]=!0),e[o]=!e[o]}))},o.prototype.isSelected=function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&L(this._availableNames,t)>=0},o.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},o.type="legend.plain",o.dependencies=["series"],o.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},o}(H),xo=y,wo=g,So=Zt;function Mo(t,e,o,i){Io(t,e,o,i),o.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),Co(t,e,o,i)}function bo(t){for(var e,o=t.getZr().storage.getDisplayList(),i=0,n=o.length;i<n&&!(e=o[i].states.emphasis);)i++;return e&&e.hoverLayer}function Co(t,e,o,i){bo(o)||o.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:i})}function Io(t,e,o,i){bo(o)||o.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:i})}var To=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=o.type,e.newlineDisabled=!1,e}return r(o,t),o.prototype.init=function(){this.group.add(this._contentGroup=new So),this.group.add(this._selectorGroup=new So),this._isFirstRender=!0},o.prototype.getContentGroup=function(){return this._contentGroup},o.prototype.getSelectorGroup=function(){return this._selectorGroup},o.prototype.render=function(t,e,o){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var n=t.get("align"),a=t.get("orient");n&&"auto"!==n||(n="right"===t.get("left")&&"vertical"===a?"right":"left");var r=t.get("selector",!0),s=t.get("selectorPosition",!0);!r||s&&"auto"!==s||(s="horizontal"===a?"end":"start"),this.renderInner(n,t,e,o,r,a,s);var h=t.getBoxLayoutParams(),d={width:o.getWidth(),height:o.getHeight()},u=t.get("padding"),p=wt(h,d,u),c=this.layoutInner(t,n,p,i,r,s),g=wt(l({width:c.width,height:c.height},h),d,u);this.group.x=g.x-c.x,this.group.y=g.y-c.y,this.group.markRedraw(),this.group.add(this._backgroundEl=function(t,e){var o=U(e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),new K({shape:{x:t.x-o[3],y:t.y-o[0],width:t.width+o[1]+o[3],height:t.height+o[0]+o[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1})}(c,t))}},o.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},o.prototype.renderInner=function(t,o,i,n,a,r,s){var l=this.getContentGroup(),h=O(),d=o.get("selectedMode"),u=[];i.eachRawSeries((function(t){!t.get("legendHoverLink")&&u.push(t.id)})),wo(o.getData(),(function(a,r){var s=a.get("name");if(!this.newlineDisabled&&(""===s||"\n"===s)){var p=new So;return p.newline=!0,void l.add(p)}var c=i.getSeriesByName(s)[0];if(!h.get(s))if(c){var g=c.getData(),f=g.getVisual("legendLineStyle")||{},y=g.getVisual("legendIcon"),m=g.getVisual("style");this._createItem(c,s,r,a,o,t,f,m,y,d).on("click",xo(Mo,s,null,n,u)).on("mouseover",xo(Co,c.name,null,n,u)).on("mouseout",xo(Io,c.name,null,n,u)),h.set(s,!0)}else i.eachRawSeries((function(i){if(!h.get(s)&&i.legendVisualProvider){var l=i.legendVisualProvider;if(!l.containName(s))return;var p=l.indexOfName(s),c=l.getItemVisual(p,"style"),g=l.getItemVisual(p,"legendIcon"),f=zt(c.fill);f&&0===f[3]&&(f[3]=.2,c=e(e({},c),{fill:kt(f,"rgba")})),this._createItem(i,s,r,a,o,t,{},c,g,d).on("click",xo(Mo,null,s,n,u)).on("mouseover",xo(Co,null,s,n,u)).on("mouseout",xo(Io,null,s,n,u)),h.set(s,!0)}}),this)}),this),a&&this._createSelector(a,o,n,r,s)},o.prototype._createSelector=function(t,e,o,i,n){var a=this.getSelectorGroup();wo(t,(function(t){var i=t.type,n=new it({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){o.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect"})}});a.add(n);var r=e.getModel("selectorLabel"),s=e.getModel(["emphasis","selectorLabel"]);Bt(n,{normal:r,emphasis:s},{defaultText:t.title}),Ot(n)}))},o.prototype._createItem=function(t,e,o,i,n,a,r,s,l,h){var d=t.visualDrawType,p=n.get("itemWidth"),c=n.get("itemHeight"),g=n.isSelected(e),f=i.get("symbolRotate"),y=i.get("symbolKeepAspect"),m=i.get("icon"),v=function(t,e,o,i,n,a){function r(t,e){"auto"===t.lineWidth&&(t.lineWidth=e.lineWidth>0?2:0),wo(t,(function(o,i){"inherit"===t[i]&&(t[i]=e[i])}))}var s=e.getModel("itemStyle").getItemStyle(),l=0===t.lastIndexOf("empty",0)?"fill":"stroke";s.decal=i.decal,"inherit"===s.fill&&(s.fill=i[n]);"inherit"===s.stroke&&(s.stroke=i[l]);"inherit"===s.opacity&&(s.opacity=("fill"===n?i:o).opacity);r(s,i);var h=e.getModel("lineStyle"),d=h.getLineStyle();if(r(d,o),"auto"===s.fill&&(s.fill=i.fill),"auto"===s.stroke&&(s.stroke=i.fill),"auto"===d.stroke&&(d.stroke=i.fill),!a){var u=e.get("inactiveBorderWidth"),p=s[l];s.lineWidth="auto"===u?i.lineWidth>0&&p?2:0:s.lineWidth,s.fill=e.get("inactiveColor"),s.stroke=e.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:s,lineStyle:d}}(l=m||l||"roundRect",i,r,s,d,g),_=new So,x=i.getModel("textStyle");if(!xt(t.getLegendIcon)||m&&"inherit"!==m){var w="inherit"===m&&t.getData().getVisual("symbol")?"inherit"===f?t.getData().getVisual("symbolRotate"):f:0;_.add(function(t){var e=t.icon||"roundRect",o=Vt(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);o.setStyle(t.itemStyle),o.rotation=(t.iconRotate||0)*Math.PI/180,o.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(o.style.stroke=o.style.fill,o.style.fill="#fff",o.style.lineWidth=2);return o}({itemWidth:p,itemHeight:c,icon:l,iconRotate:w,itemStyle:v.itemStyle,lineStyle:v.lineStyle,symbolKeepAspect:y}))}else _.add(t.getLegendIcon({itemWidth:p,itemHeight:c,icon:l,iconRotate:f,itemStyle:v.itemStyle,lineStyle:v.lineStyle,symbolKeepAspect:y}));var S="left"===a?p+5:-5,M=a,b=n.get("formatter"),C=e;u(b)&&b?C=b.replace("{name}",null!=e?e:""):xt(b)&&(C=b(e));var I=i.get("inactiveColor");_.add(new it({style:Dt(x,{text:C,x:S,y:c/2,fill:g?x.getTextColor():I,align:M,verticalAlign:"middle"})}));var T=new K({shape:_.getBoundingRect(),invisible:!0}),D=i.getModel("tooltip");return D.get("show")&&Lt({el:T,componentModel:n,itemName:e,itemTooltipOption:D.option}),_.add(T),_.eachChild((function(t){t.silent=!0})),T.silent=!h,this.getContentGroup().add(_),Ot(_),_.__legendDataIndex=o,_},o.prototype.layoutInner=function(t,e,o,i,n,a){var r=this.getContentGroup(),s=this.getSelectorGroup();Wt(t.get("orient"),r,t.get("itemGap"),o.width,o.height);var l=r.getBoundingRect(),h=[-l.x,-l.y];if(s.markRedraw(),r.markRedraw(),n){Wt("horizontal",s,t.get("selectorItemGap",!0));var d=s.getBoundingRect(),u=[-d.x,-d.y],p=t.get("selectorButtonGap",!0),c=t.getOrient().index,g=0===c?"width":"height",f=0===c?"height":"width",y=0===c?"y":"x";"end"===a?u[c]+=l[g]+p:h[c]+=d[g]+p,u[1-c]+=l[f]/2-d[f]/2,s.x=u[0],s.y=u[1],r.x=h[0],r.y=h[1];var m={x:0,y:0};return m[g]=l[g]+p+d[g],m[f]=Math.max(l[f],d[f]),m[y]=Math.min(0,d[y]+u[1-c]),m}return r.x=h[0],r.y=h[1],this.group.getBoundingRect()},o.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},o.type="legend.plain",o}(E);function Do(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries((function(t){for(var o=0;o<e.length;o++)if(!e[o].isSelected(t.name))return!1;return!0}))}function Ao(t,e,o){var i,n={},a="toggleSelected"===t;return o.eachComponent("legend",(function(o){a&&null!=i?o[i?"select":"unSelect"](e.name):"allSelect"===t||"inverseSelect"===t?o[t]():(o[t](e.name),i=o.isSelected(e.name));var r=o.getData();g(r,(function(t){var e=t.get("name");if("\n"!==e&&""!==e){var i=o.isSelected(e);n.hasOwnProperty(e)?n[e]=n[e]&&i:n[e]=i}}))})),"allSelect"===t||"inverseSelect"===t?{selected:n}:{name:e.name,selected:n}}function Ro(t){t.registerComponentModel(_o),t.registerComponentView(To),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,Do),t.registerSubTypeDefaulter("legend",(function(){return"plain"})),function(t){t.registerAction("legendToggleSelect","legendselectchanged",y(Ao,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",y(Ao,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",y(Ao,"inverseSelect")),t.registerAction("legendSelect","legendselected",y(Ao,"select")),t.registerAction("legendUnSelect","legendunselected",y(Ao,"unSelect"))}(t)}function Po(t,e,o){var i=[1,1];i[t.getOrient().index]=0,Nt(e,o,{type:"box",ignoreSize:!!i})}var zo=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return r(e,t),e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(e,o,i){var n=Ht(e);t.prototype.init.call(this,e,o,i),Po(this,e,n)},e.prototype.mergeOption=function(e,o){t.prototype.mergeOption.call(this,e,o),Po(this,this.option,e)},e.type="legend.scroll",e.defaultOption=Et(_o.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(_o),ko=Zt,Bo=["width","height"],Oo=["x","y"],Lo=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.type,t.newlineDisabled=!0,t._currentIndex=0,t}return r(o,e),o.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new ko),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new ko)},o.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},o.prototype.renderInner=function(o,i,n,a,r,l,h){var d=this;e.prototype.renderInner.call(this,o,i,n,a,r,l,h);var u=this._controllerGroup,p=i.get("pageIconSize",!0),c=t(p)?p:[p,p];f("pagePrev",0);var g=i.getModel("pageTextStyle");function f(t,e){var o=t+"DataIndex",n=Gt(i.get("pageIcons",!0)[i.getOrient().name][e],{onclick:s(d._pageGo,d,o,i,a)},{x:-c[0]/2,y:-c[1]/2,width:c[0],height:c[1]});n.name=t,u.add(n)}u.add(new it({name:"pageText",style:{text:"xx/xx",fill:g.getTextColor(),font:g.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),f("pageNext",1)},o.prototype.layoutInner=function(t,e,o,i,n,a){var r=this.getSelectorGroup(),s=t.getOrient().index,l=Bo[s],d=Oo[s],u=Bo[1-s],p=Oo[1-s];n&&Wt("horizontal",r,t.get("selectorItemGap",!0));var c=t.get("selectorButtonGap",!0),g=r.getBoundingRect(),f=[-g.x,-g.y],y=h(o);n&&(y[l]=o[l]-g[l]-c);var m=this._layoutContentAndController(t,i,y,s,l,u,p,d);if(n){if("end"===a)f[s]+=m[l]+c;else{var v=g[l]+c;f[s]-=v,m[d]-=v}m[l]+=g[l]+c,f[1-s]+=m[p]+m[u]/2-g[u]/2,m[u]=Math.max(m[u],g[u]),m[p]=Math.min(m[p],g[p]+f[1-s]),r.x=f[0],r.y=f[1],r.markRedraw()}return m},o.prototype._layoutContentAndController=function(t,e,o,i,n,a,r,s){var l=this.getContentGroup(),h=this._containerGroup,d=this._controllerGroup;Wt(t.get("orient"),l,t.get("itemGap"),i?o.width:null,i?null:o.height),Wt("horizontal",d,t.get("pageButtonItemGap",!0));var u=l.getBoundingRect(),p=d.getBoundingRect(),c=this._showController=u[n]>o[n],g=[-u.x,-u.y];e||(g[i]=l[s]);var f=[0,0],y=[-p.x,-p.y],m=B(t.get("pageButtonGap",!0),t.get("itemGap",!0));c&&("end"===t.get("pageButtonPosition",!0)?y[i]+=o[n]-p[n]:f[i]+=p[n]+m);y[1-i]+=u[a]/2-p[a]/2,l.setPosition(g),h.setPosition(f),d.setPosition(y);var v={x:0,y:0};if(v[n]=c?o[n]:u[n],v[a]=Math.max(u[a],p[a]),v[r]=Math.min(0,p[r]+y[1-i]),h.__rectSize=o[n],c){var _={x:0,y:0};_[n]=Math.max(o[n]-p[n]-m,0),_[a]=v[a],h.setClipPath(new K({shape:_})),h.__rectSize=_[n]}else d.eachChild((function(t){t.attr({invisible:!0,silent:!0})}));var x=this._getPageInfo(t);return null!=x.pageIndex&&w(l,{x:x.contentPosition[0],y:x.contentPosition[1]},c?t:null),this._updatePageInfoView(t,x),v},o.prototype._pageGo=function(t,e,o){var i=this._getPageInfo(e)[t];null!=i&&o.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:e.id})},o.prototype._updatePageInfoView=function(t,e){var o=this._controllerGroup;g(["pagePrev","pageNext"],(function(i){var n=null!=e[i+"DataIndex"],a=o.childOfName(i);a&&(a.setStyle("fill",n?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),a.cursor=n?"pointer":"default")}));var i=o.childOfName("pageText"),n=t.get("pageFormatter"),a=e.pageIndex,r=null!=a?a+1:0,s=e.pageCount;i&&n&&i.setStyle("text",u(n)?n.replace("{current}",null==r?"":r+"").replace("{total}",null==s?"":s+""):n({current:r,total:s}))},o.prototype._getPageInfo=function(t){var e=t.get("scrollDataIndex",!0),o=this.getContentGroup(),i=this._containerGroup.__rectSize,n=t.getOrient().index,a=Bo[n],r=Oo[n],s=this._findTargetItemIndex(e),l=o.children(),h=l[s],d=l.length,u=d?1:0,p={contentPosition:[o.x,o.y],pageCount:u,pageIndex:u-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return p;var c=v(h);p.contentPosition[n]=-c.s;for(var g=s+1,f=c,y=c,m=null;g<=d;++g)(!(m=v(l[g]))&&y.e>f.s+i||m&&!_(m,f.s))&&(f=y.i>f.i?y:m)&&(null==p.pageNextDataIndex&&(p.pageNextDataIndex=f.i),++p.pageCount),y=m;for(g=s-1,f=c,y=c,m=null;g>=-1;--g)(m=v(l[g]))&&_(y,m.s)||!(f.i<y.i)||(y=f,null==p.pagePrevDataIndex&&(p.pagePrevDataIndex=f.i),++p.pageCount,++p.pageIndex),f=m;return p;function v(t){if(t){var e=t.getBoundingRect(),o=e[r]+t[r];return{s:o,e:o+e[a],i:t.__legendDataIndex}}}function _(t,e){return t.e>=e&&t.s<=e+i}},o.prototype._findTargetItemIndex=function(t){return this._showController?(this.getContentGroup().eachChild((function(i,n){var a=i.__legendDataIndex;null==o&&null!=a&&(o=n),a===t&&(e=n)})),null!=e?e:o):0;var e,o},o.type="legend.scroll",o}(To);function Wo(t){It(Ro),t.registerComponentModel(zo),t.registerComponentView(Lo),function(t){t.registerAction("legendScroll","legendscroll",(function(t,e){var o=t.scrollDataIndex;null!=o&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},(function(t){t.setScrollDataIndex(o)}))}))}(t)}function Vo(t){It(Ro),It(Wo)}var Zo=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return r(e,t),e.type="dataZoom.inside",e.defaultOption=Et(Ze.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(Ze),Ho=Yt();function Eo(t,e,o){Ho(t).coordSysRecordMap.each((function(t){var i=t.dataZoomInfoMap.get(e.uid);i&&(i.getRange=o)}))}function No(t,e){if(e){t.removeKey(e.model.uid);var o=e.controller;o&&o.dispose()}}function Go(t,e){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function Yo(t,e,o,i){return t.coordinateSystem.containPoint([o,i])}function Xo(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,(function(t,e){var o=Ho(e),i=o.coordSysRecordMap||(o.coordSysRecordMap=O());i.each((function(t){t.dataZoomInfoMap=null})),t.eachComponent({mainType:"dataZoom",subType:"inside"},(function(t){var o=Le(t);g(o.infoList,(function(o){var n=o.model.uid,a=i.get(n)||i.set(n,function(t,e){var o={model:e,containsPoint:y(Yo,e),dispatchAction:y(Go,t),dataZoomInfoMap:null,controller:null},i=o.controller=new ie(t.getZr());return g(["pan","zoom","scrollMove"],(function(t){i.on(t,(function(e){var i=[];o.dataZoomInfoMap.each((function(n){if(e.isAvailableBehavior(n.model.option)){var a=(n.getRange||{})[t],r=a&&a(n.dzReferCoordSysInfo,o.model.mainType,o.controller,e);!n.model.get("disabled",!0)&&r&&i.push({dataZoomId:n.model.id,start:r[0],end:r[1]})}})),i.length&&o.dispatchAction(i)}))})),o}(e,o.model));(a.dataZoomInfoMap||(a.dataZoomInfoMap=O())).set(t.uid,{dzReferCoordSysInfo:o,model:t,getRange:null})}))})),i.each((function(t){var e,o=t.controller,n=t.dataZoomInfoMap;if(n){var a=n.keys()[0];null!=a&&(e=n.get(a))}if(e){var r=function(t){var e,o="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return t.each((function(t){var a=t.model,r=!a.get("disabled",!0)&&(!a.get("zoomLock",!0)||"move");i[o+r]>i[o+e]&&(e=r),n=n&&a.get("preventDefaultMouseMove",!0)})),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n}}}(n);o.enable(r.controlType,r.opt),o.setPointerChecker(t.containsPoint),at(t,"dispatchAction",e.model.get("throttle",!0),"fixRate")}else No(i,t)}))}))}var Fo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return r(e,t),e.prototype.render=function(e,o,i){t.prototype.render.apply(this,arguments),e.noTarget()?this._clear():(this.range=e.getPercentRange(),Eo(i,e,{pan:s(Uo.pan,this),zoom:s(Uo.zoom,this),scrollMove:s(Uo.scrollMove,this)}))},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){!function(t,e){for(var o=Ho(t).coordSysRecordMap,i=o.keys(),n=0;n<i.length;n++){var a=i[n],r=o.get(a),s=r.dataZoomInfoMap;if(s){var l=e.uid;s.get(l)&&(s.removeKey(l),s.keys().length||No(o,r))}}}(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(He),Uo={zoom:function(t,e,o,i){var n=this.range,a=n.slice(),r=t.axisModels[0];if(r){var s=jo[e](null,[i.originX,i.originY],r,o,t),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],h=Math.max(1/i.scale,0);a[0]=(a[0]-l)*h+l,a[1]=(a[1]-l)*h+l;var d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return ne(0,a,[0,100],0,d.minSpan,d.maxSpan),this.range=a,n[0]!==a[0]||n[1]!==a[1]?a:void 0}},pan:Ko((function(t,e,o,i,n,a){var r=jo[i]([a.oldX,a.oldY],[a.newX,a.newY],e,n,o);return r.signal*(t[1]-t[0])*r.pixel/r.pixelLength})),scrollMove:Ko((function(t,e,o,i,n,a){return jo[i]([0,0],[a.scrollDelta,a.scrollDelta],e,n,o).signal*(t[1]-t[0])*a.scrollDelta}))};function Ko(t){return function(e,o,i,n){var a=this.range,r=a.slice(),s=e.axisModels[0];if(s)return ne(t(r,s,e,o,i,n),r,[0,100],"all"),this.range=r,a[0]!==r[0]||a[1]!==r[1]?r:void 0}}var jo={grid:function(t,e,o,i,n){var a=o.axis,r={},s=n.model.coordinateSystem.getRect();return t=t||[0,0],"x"===a.dim?(r.pixel=e[0]-t[0],r.pixelLength=s.width,r.pixelStart=s.x,r.signal=a.inverse?1:-1):(r.pixel=e[1]-t[1],r.pixelLength=s.height,r.pixelStart=s.y,r.signal=a.inverse?-1:1),r},polar:function(t,e,o,i,n){var a=o.axis,r={},s=n.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),h=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===o.mainType?(r.pixel=e[0]-t[0],r.pixelLength=l[1]-l[0],r.pixelStart=l[0],r.signal=a.inverse?1:-1):(r.pixel=e[1]-t[1],r.pixelLength=h[1]-h[0],r.pixelStart=h[0],r.signal=a.inverse?-1:1),r},singleAxis:function(t,e,o,i,n){var a=o.axis,r=n.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===a.orient?(s.pixel=e[0]-t[0],s.pixelLength=r.width,s.pixelStart=r.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=r.height,s.pixelStart=r.y,s.signal=a.inverse?-1:1),s}},qo=Fo;function Qo(t){Fe(t),t.registerComponentModel(Zo),t.registerComponentView(qo),Xo(t)}var Jo=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return r(e,t),e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Et(Ze.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(Ze),$o=K,ti=["line","bar","candlestick","scatter"],ei={easing:"cubicOut",duration:100,delay:0};function oi(t){return"vertical"===t?"ns-resize":"ew-resize"}var ii=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o._displayables={},o}return r(e,t),e.prototype.init=function(t,e){this.api=e,this._onBrush=s(this._onBrush,this),this._onBrushEnd=s(this._onBrushEnd,this)},e.prototype.render=function(e,o,i,n){if(t.prototype.render.apply(this,arguments),at(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1!==e.get("show")){if(e.noTarget())return this._clear(),void this.group.removeAll();n&&"dataZoom"===n.type&&n.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){rt(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new Zt;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,o=t.get("brushSelect")?7:0,i=this._findCoordRect(),n={width:e.getWidth(),height:e.getHeight()},a="horizontal"===this._orient?{right:n.width-i.x-i.width,top:n.height-30-7-o,width:i.width,height:30}:{right:7,top:i.y,width:30,height:i.height},r=Ht(t.option);g(["right","top","width","height"],(function(t){"ph"===r[t]&&(r[t]=a[t])}));var s=wt(r,n);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],"vertical"===this._orient&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,e=this._location,o=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),n=i&&i.get("inverse"),a=this._displayables.sliderGroup,r=(this._dataShadowInfo||{}).otherAxisInverse;a.attr("horizontal"!==o||n?"horizontal"===o&&n?{scaleY:r?1:-1,scaleX:-1}:"vertical"!==o||n?{scaleY:r?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:r?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:r?1:-1,scaleX:1});var s=t.getBoundingRect([a]);t.x=e.x-s.x,t.y=e.y-s.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,o=this._displayables.sliderGroup,i=t.get("brushSelect");o.add(new $o({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var n=new $o({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:s(this._onClickPanel,this)}),a=this.api.getZr();i?(n.on("mousedown",this._onBrushStart,this),n.cursor="crosshair",a.on("mousemove",this._onBrush),a.on("mouseup",this._onBrushEnd)):(a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)),o.add(n)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],t){var e=this._size,o=this._shadowSize||[],i=t.series,n=i.getRawData(),a=i.getShadowDim?i.getShadowDim():t.otherDim;if(null!=a){var r=this._shadowPolygonPts,s=this._shadowPolylinePts;if(n!==this._shadowData||a!==this._shadowDim||e[0]!==o[0]||e[1]!==o[1]){var l=n.getDataExtent(a),h=.3*(l[1]-l[0]);l=[l[0]-h,l[1]+h];var d,u=[0,e[1]],p=[0,e[0]],c=[[e[0],0],[0,0]],g=[],f=p[1]/(n.count()-1),y=0,m=Math.round(n.count()/e[0]);n.each([a],(function(t,e){if(m>0&&e%m)y+=f;else{var o=null==t||isNaN(t)||""===t,i=o?0:N(t,l,u,!0);o&&!d&&e?(c.push([c[c.length-1][0],0]),g.push([g[g.length-1][0],0])):!o&&d&&(c.push([y,0]),g.push([y,0])),c.push([y,i]),g.push([y,i]),y+=f,d=o}})),r=this._shadowPolygonPts=c,s=this._shadowPolylinePts=g}this._shadowData=n,this._shadowDim=a,this._shadowSize=[e[0],e[1]];for(var v,_,x,w,S,M=this.dataZoomModel,b=0;b<3;b++){var C=(v=1===b,_=void 0,x=void 0,w=void 0,S=void 0,_=M.getModel(v?"selectedDataBackground":"dataBackground"),x=new Zt,w=new qt({shape:{points:r},segmentIgnoreThreshold:1,style:_.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),S=new Qt({shape:{points:s},segmentIgnoreThreshold:1,style:_.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19}),x.add(w),x.add(S),x);this._displayables.sliderGroup.add(C),this._displayables.dataShadowSegs.push(C)}}}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var o,i=this.ecModel;return t.eachTargetAxis((function(n,a){var r=t.getAxisProxy(n,a).getTargetSeriesModels();g(r,(function(t){if(!(o||!0!==e&&L(ti,t.get("type"))<0)){var r,s=i.getComponent(Be(n),a).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[n],h=t.coordinateSystem;null!=l&&h.getOtherAxis&&(r=h.getOtherAxis(s).inverse),l=t.getData().mapDimension(l),o={thisAxis:s,series:t,thisDim:n,otherDim:l,otherAxisInverse:r}}}),this)}),this),o}},e.prototype._renderHandle=function(){var t=this.group,e=this._displayables,o=e.handles=[null,null],i=e.handleLabels=[null,null],n=this._displayables.sliderGroup,a=this._size,r=this.dataZoomModel,l=this.api,h=r.get("borderRadius")||0,d=r.get("brushSelect"),u=e.filler=new $o({silent:d,style:{fill:r.get("fillerColor")},textConfig:{position:"inside"}});n.add(u),n.add(new $o({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:a[0],height:a[1],r:h},style:{stroke:r.get("dataBackgroundColor")||r.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),g([0,1],(function(e){var a=r.get("handleIcon");!Xt[a]&&a.indexOf("path://")<0&&a.indexOf("image://")<0&&(a="path://"+a);var l=Vt(a,-1,0,2,2,null,!0);l.attr({cursor:oi(this._orient),draggable:!0,drift:s(this._onDragMove,this,e),ondragend:s(this._onDragEnd,this),onmouseover:s(this._showDataInfo,this,!0),onmouseout:s(this._showDataInfo,this,!1),z2:5});var h=l.getBoundingRect(),d=r.get("handleSize");this._handleHeight=P(d,this._size[1]),this._handleWidth=h.width/h.height*this._handleHeight,l.setStyle(r.getModel("handleStyle").getItemStyle()),l.style.strokeNoScale=!0,l.rectHover=!0,l.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),Ot(l);var u=r.get("handleColor");null!=u&&(l.style.fill=u),n.add(o[e]=l);var p=r.getModel("textStyle");t.add(i[e]=new it({silent:!0,invisible:!0,style:Dt(p,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:p.getTextColor(),font:p.getFont()}),z2:10}))}),this);var p=u;if(d){var c=P(r.get("moveHandleSize"),a[1]),f=e.moveHandle=new K({style:r.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:a[1]-.5,height:c}}),y=.8*c,m=e.moveHandleIcon=Vt(r.get("moveHandleIcon"),-y/2,-y/2,y,y,"#fff",!0);m.silent=!0,m.y=a[1]+c/2-.5,f.ensureState("emphasis").style=r.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var v=Math.min(a[1]/2,Math.max(c,10));(p=e.moveZone=new K({invisible:!0,shape:{y:a[1]-v,height:c+v}})).on("mouseover",(function(){l.enterEmphasis(f)})).on("mouseout",(function(){l.leaveEmphasis(f)})),n.add(f),n.add(m),n.add(p)}p.attr({draggable:!0,cursor:oi(this._orient),drift:s(this._onDragMove,this,"all"),ondragstart:s(this._showDataInfo,this,!0),ondragend:s(this._onDragEnd,this),onmouseover:s(this._showDataInfo,this,!0),onmouseout:s(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[N(t[0],[0,100],e,!0),N(t[1],[0,100],e,!0)]},e.prototype._updateInterval=function(t,e){var o=this.dataZoomModel,i=this._handleEnds,n=this._getViewExtent(),a=o.findRepresentativeAxisProxy().getMinMaxSpan(),r=[0,100];ne(e,i,n,o.get("zoomLock")?"all":t,null!=a.minSpan?N(a.minSpan,r,n,!0):null,null!=a.maxSpan?N(a.maxSpan,r,n,!0):null);var s=this._range,l=this._range=F([N(i[0],n,r,!0),N(i[1],n,r,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},e.prototype._updateView=function(t){var e=this._displayables,o=this._handleEnds,i=F(o.slice()),n=this._size;g([0,1],(function(t){var i=e.handles[t],a=this._handleHeight;i.attr({scaleX:a/2,scaleY:a/2,x:o[t]+(t?-1:1),y:n[1]/2-a/2})}),this),e.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:n[1]});var a={x:i[0],width:i[1]-i[0]};e.moveHandle&&(e.moveHandle.setShape(a),e.moveZone.setShape(a),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",a.x+a.width/2));for(var r=e.dataShadowSegs,s=[0,i[0],i[1],n[0]],l=0;l<r.length;l++){var h=r[l],d=h.getClipPath();d||(d=new K,h.setClipPath(d)),d.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:n[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,o=this._displayables,i=o.handleLabels,n=this._orient,a=["",""];if(e.get("showDetail")){var r=e.findRepresentativeAxisProxy();if(r){var s=r.getAxisModel().axis,l=this._range,h=t?r.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:r.getDataValueWindow();a=[this._formatLabel(h[0],s),this._formatLabel(h[1],s)]}}var d=F(this._handleEnds.slice());function u(t){var e=Ft(o.handles[t].parent,this.group),r=Ut(0===t?"right":"left",e),s=this._handleWidth/2+5,l=Kt([d[t]+(0===t?-s:s),this._size[1]/2],e);i[t].setStyle({x:l[0],y:l[1],verticalAlign:"horizontal"===n?"middle":r,align:"horizontal"===n?r:"center",text:a[t]})}u.call(this,0),u.call(this,1)},e.prototype._formatLabel=function(t,e){var o=this.dataZoomModel,i=o.get("labelFormatter"),n=o.get("labelPrecision");null!=n&&"auto"!==n||(n=e.getPixelPrecision());var a=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(n,20));return xt(i)?i(t,a):u(i)?i.replace("{value}",a):a},e.prototype._showDataInfo=function(t){t=this._dragging||t;var e=this._displayables,o=e.handleLabels;o[0].attr("invisible",!t),o[1].attr("invisible",!t),e.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](e.moveHandle,1)},e.prototype._onDragMove=function(t,e,o,i){this._dragging=!0,p(i.event);var n=this._displayables.sliderGroup.getLocalTransform(),a=Kt([e,o],n,!0),r=this._updateInterval(t,a[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),r&&s&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var e=this._size,o=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(o[0]<0||o[0]>e[0]||o[1]<0||o[1]>e[1])){var i=this._handleEnds,n=(i[0]+i[1])/2,a=this._updateInterval("all",o[0]-n);this._updateView(),a&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var e=t.offsetX,o=t.offsetY;this._brushStart=new jt(e,o),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,e){e.attr("ignore",!0);var o=e.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(o.width)<5)){var i=this._getViewExtent(),n=[0,100];this._range=F([N(o.x,i,n,!0),N(o.x+o.width,i,n,!0)]),this._handleEnds=[o.x,o.x+o.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(p(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,e){var o=this._displayables,i=this.dataZoomModel,n=o.brushRect;n||(n=o.brushRect=new $o({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),o.sliderGroup.add(n)),n.attr("ignore",!1);var a=this._brushStart,r=this._displayables.sliderGroup,s=r.transformCoordToLocal(t,e),l=r.transformCoordToLocal(a.x,a.y),h=this._size;s[0]=Math.max(Math.min(h[0],s[0]),0),n.setShape({x:l[0],y:0,width:s[0]-l[0],height:h[1]})},e.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?ei:null,start:e[0],end:e[1]})},e.prototype._findCoordRect=function(){var t,e=Le(this.dataZoomModel).infoList;if(!t&&e.length){var o=e[0].model.coordinateSystem;t=o.getRect&&o.getRect()}if(!t){var i=this.api.getWidth(),n=this.api.getHeight();t={x:.2*i,y:.2*n,width:.6*i,height:.6*n}}return t},e.type="dataZoom.slider",e}(He);function ni(t){t.registerComponentModel(Jo),t.registerComponentView(ii),Fe(t)}function ai(t){It(Qo),It(ni)}export{fo as a,Vo as b,ai as c,Pe as d,vo as i};
