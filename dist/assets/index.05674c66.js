import{_ as e}from"./d-dialog.ed95f2b9.js";import{V as a,W as t,X as s,s as l,_ as i,Y as n,Z as o,a0 as c}from"./main.858372aa.js";import{bu as d,bv as r,a4 as u,af as p,Q as f,bz as m,a2 as b,bF as y,aA as v,c4 as g,cr as h,r as k,dS as j,aG as x,aH as _,b3 as N,x as D,ay as w,W as S,X as C,b1 as $,I as O,aE as E,U as I,D as T,A as V,C as K,bp as L,aI as R,a3 as z,V as A}from"./el-button.0a4ba32a.js";import"./el-input.b3ba137c.js";import{E as G,a as U}from"./el-select.dc7a2ac5.js";import"./el-scrollbar.3e84cd99.js";import"./el-popper.7e8f10c3.js";import{E as M,a as q,b as H}from"./el-main.5911d2a1.js";import{a as P,E as W}from"./el-tabs.0374e920.js";import{R as X}from"./Refresh.0fab75c8.js";import{m as F}from"./typescript.72bf8adc.js";import"./el-dialog.4b8a03dc.js";import"./el-overlay.ebdea840.js";import"./index.8dc67c0c.js";import"./index.f364da82.js";import"./event.0bae16b8.js";import"./isEqual.6fce44d5.js";import"./_baseIsEqual.220044e7.js";import"./_Uint8Array.d6bc81f7.js";import"./index.b9023f44.js";import"./validator.053f84bf.js";import"./deprecation.bfd0cf7f.js";import"./index.c956e740.js";import"./arrow-up.0ae35c9a.js";import"./plus.408c9cf2.js";const Q=Symbol("rowContextKey");const Y=y(u({name:"ElCol",props:d({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:r([Number,Object]),default:()=>F({})},sm:{type:r([Number,Object]),default:()=>F({})},md:{type:r([Number,Object]),default:()=>F({})},lg:{type:r([Number,Object]),default:()=>F({})},xl:{type:r([Number,Object]),default:()=>F({})}}),setup(e,{slots:a}){const{gutter:t}=p(Q,{gutter:f((()=>0))}),s=m("col"),l=f((()=>t.value?{paddingLeft:t.value/2+"px",paddingRight:t.value/2+"px"}:{})),i=f((()=>{const a=[];["span","offset","pull","push"].forEach((t=>{const l=e[t];"number"==typeof l&&("span"===t?a.push(s.b(`${e[t]}`)):l>0&&a.push(s.b(`${t}-${e[t]}`)))}));return["xs","sm","md","lg","xl"].forEach((t=>{if("number"==typeof e[t])a.push(s.b(`${t}-${e[t]}`));else if("object"==typeof e[t]){const l=e[t];Object.keys(l).forEach((e=>{a.push("span"!==e?s.b(`${t}-${e}-${l[e]}`):s.b(`${t}-${l[e]}`))}))}})),t.value&&a.push(s.is("guttered")),a}));return()=>b(e.tag,{class:[s.b(),i.value],style:l.value},a)}})),Z=y(u({name:"ElRow",props:d({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:["start","center","end","space-around","space-between","space-evenly"],default:"start"},align:{type:String,values:["top","middle","bottom"],default:"top"}}),setup(e,{slots:a}){const t=m("row"),s=f((()=>e.gutter));v(Q,{gutter:s});const l=f((()=>{const a={marginLeft:"",marginRight:""};return e.gutter&&(a.marginLeft=`-${e.gutter/2}px`,a.marginRight=a.marginLeft),a}));return()=>b(e.tag,{class:[t.b(),t.is(`justify-${e.justify}`,"start"!==e.justify),t.is(`align-${e.align}`,"top"!==e.align)],style:l.value},{default:()=>{var e;return[null==(e=a.default)?void 0:e.call(a)]}})}}));const B={class:"stock-wrap"},J={class:"stock-handle d-absolute d-hover d-sub"},ee={class:"stock-search"},ae={class:"d-flex f12",style:{width:"200px"}},te={class:"d-elip",style:{width:"30%"}},se={class:"d-elip",style:{width:"50%"}},le={class:"d-elip",style:{width:"20%"}},ie=["onClick"],ne={class:"title fl",style:{width:"44%"}},oe={class:"d-elip"},ce={class:"f12 d-main"},de={class:"fl",style:{width:"30%"}},re={class:"fl",style:{width:"26%"}},ue=["onClick"],pe={class:"mb10 d-flex"},fe={class:"d-main"},me={class:"b f20 mt5"},be={class:"f12"},ye={class:"content-header d-flex pt10",style:{"padding-right":"120px"}},ve={class:"d-cell b f28 d-elip"},ge={class:"f16"},he={class:"f16"},ke={class:"b"},je={class:"b"};var xe=g({setup(e){const d=h(),r=[{label:"分时",value:"trends"},{label:"日K",value:"101"},{label:"周K",value:"102"},{label:"月K",value:"103"},{label:"季K",value:"104"},{label:"年K",value:"106"}],u=k({keyword:"",activeName:"trends",activeData:{},stockOption:[],selfStockData:[],subOptions:[],stockInfo:[],stockGrails:[],loading:!1});function p(e){return 0==e?"gray":e>0?"#e5353d":"#41c662"}function f(e){var a,t,s,l;d.value=(a=d.value,t=e.newIndex,s=e.oldIndex,l=a[s],a[s]=a[t],a[t]=l,a)}function m(e){e&&n(e).then((e=>{u.subOptions=e.Data||[]}))}function y(e){if(d.value.some((a=>a.Code==e.Code)))return;let a={Code:e.Code,MktNum:e.MktNum,SecurityTypeName:e.SecurityTypeName,SecurityType:e.SecurityType};d.value.unshift(a),xe()}function v(e){"trends"==u.activeName?_e():function(){const e={secid:`${u.activeData.f13}.${u.activeData.f12}`,klt:u.activeName};c(e).then((e=>{u.stockOption=e.data.klines||[]}))}()}let g={1:"sh",2:"sz",5:"sz",19:"rt_hk",20:"gb_"};const F=[{n:"最高",i:4},{n:"今开",i:1},{n:"成交量",i:8,unit:"手"},{n:"最低",i:5},{n:"昨收",i:2},{n:"成交额",i:9}];function Q(){let e=d.value.find((e=>e.Code==u.activeData.f12));u.activeData.SecurityTypeName=e.SecurityTypeName;let a=`${g[e.SecurityType]}${e.Code.toLowerCase()}`;u.stockInfo=[],o(a).then((e=>{let a=e.match(/stock="(\S*)";/);a&&(u.stockInfo=a[1].split(","))}))}function xe(){if(!d.value.length)return;u.loading=!0;let e=d.value.map((e=>`${e.MktNum}.${e.Code}`));a(e.join(",")).then((e=>{u.selfStockData=e.data.diff||[],j(u.activeData)&&(u.activeData=u.selfStockData[0]),u.activeName="trends",_e(),Q()})).finally((()=>{setTimeout((()=>{u.loading=!1}),200)}));a(["1.000001","0.399001","0.399006","1.000688","100.HSI"].join(",")).then((e=>{u.stockGrails=e.data.diff||[]}))}function _e(){const e={secid:`${u.activeData.f13}.${u.activeData.f12}`};t(e).then((e=>{u.stockOption=e.data.trends||[]}))}return xe(),(e,a)=>{const t=x("el-icon"),n=_("loading");return N((w(),S("div",B,[C("div",J,[b(t,{size:16,title:"刷新",onClick:xe},{default:$((()=>[b(D(X))])),_:1})]),b(D(H),{class:"d-layout hfull"},{default:$((()=>[b(D(M),{class:"d-left-tabs pt30",style:{"background-color":"var(--bg-info)",width:"220px"}},{default:$((()=>[C("div",ee,[b(D(G),{class:"wfull",modelValue:D(u).keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>D(u).keyword=e),size:"default",filterable:"",remote:"","reserve-keyword":"","value-key":"Code",placeholder:"输入股票名称、代码","remote-method":m,onChange:y},{default:$((()=>[(w(!0),S(O,null,E(D(u).subOptions,(e=>(w(),I(D(U),{key:e.ID,value:e},{default:$((()=>[C("li",ae,[C("span",te,T(e.Code),1),C("span",se,T(e.Name),1),C("span",le,T(e.SecurityTypeName),1)])])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])]),b(D(s),{class:"self-content d-scrollbar-hide",animation:200,list:D(u).selfStockData,itemKey:"f12",onEnd:f},{item:$((({element:e,index:a})=>[(w(),S("p",{class:V(["self-content-li d-hidden",[p(e.f3),{active:D(u).activeData==e}]]),key:e.f12,onClick:a=>{return t=e,u.activeData=t,u.activeName="trends",_e(),void Q();var t},style:K({color:p(e.f3)})},[C("span",ne,[C("p",oe,T(e.f14),1),C("code",ce,T(e.f12),1)]),C("span",de,T(e.f2),1),C("span",re,T(e.f3)+"%",1),C("span",{class:"stock-del d-flex-center",onClick:L((t=>function(e,a){e.f12==u.activeData.f12&&(u.activeData={}),d.value.splice(a,1),xe()}(e,a)),["stop"])},[b(t,null,{default:$((()=>[b(D(l))])),_:1})],8,ue)],14,ie))])),_:1},8,["list"])])),_:1}),b(D(q),{class:"todo-content pr10 hfull",style:{"padding-top":"10px"}},{default:$((()=>[C("ul",pe,[(w(!0),S(O,null,E(D(u).stockGrails,(e=>(w(),S("li",{style:K({color:p(e.f3)}),class:"mr20",key:e.f1},[C("span",fe,T(e.f14),1),C("p",me,T(e.f2),1),C("p",be,T(e.f4)+"("+T(e.f3)+"%)",1)],4)))),128))]),C("div",ye,[C("span",ve,[C("b",null,T(D(u).activeData.f14),1),C("small",ge,T(D(u).activeData.f12),1),C("small",he,T(D(u).activeData.SecurityTypeName),1)]),C("p",ke,[C("span",null,T(D(u).activeData.f2),1),C("span",{style:K([{background:"gray","border-radius":"3px",padding:"0 4px","line-height":"18px",color:"#fff"},{backgroundColor:p(D(u).activeData.f3)}]),class:"ml10 f12 d-inline"},T(D(u).activeData.f3),5)])]),b(D(Z),{class:"mt10 bt",style:{"line-height":"26px"}},{default:$((()=>[(w(),S(O,null,E(F,(e=>b(D(Y),{span:8,key:e},{default:$((()=>[C("span",null,T(e.n)+"：",1),C("span",je,T(D(u).stockInfo[e.i]||"-")+" "+T(e.unit),1)])),_:2},1024))),64))])),_:1}),b(D(P),{class:"stock-title bb bt",modelValue:D(u).activeName,"onUpdate:modelValue":a[1]||(a[1]=e=>D(u).activeName=e),onTabClick:v},{default:$((()=>[(w(),S(O,null,E(r,(e=>b(D(W),{key:e.value,name:e.value,label:e.label},null,8,["name","label"]))),64))])),_:1},8,["modelValue"]),"trends"==D(u).activeName?(w(),I(R(z((()=>i((()=>import("./Trends.9fd778bd.js")),["assets/Trends.9fd778bd.js","assets/install.e81c9494.js","assets/el-button.0a4ba32a.js","assets/install.2a557092.js"])))),{key:0,data:D(u).stockOption,style:{width:"100%",height:"360px"}},null,8,["data"])):A("",!0),"trends"!=D(u).activeName?(w(),I(R(z((()=>i((()=>import("./KLine.12d4397c.js")),["assets/KLine.12d4397c.js","assets/install.e81c9494.js","assets/el-button.0a4ba32a.js","assets/install.2a557092.js"])))),{key:1,data:D(u).stockOption,style:{width:"100%",height:"360px"}},null,8,["data"])):A("",!0)])),_:1})])),_:1})])),[[n,D(u).loading]])}}},[["__scopeId","data-v-7b5ffbf6"]]);const _e={name:"appStock"},Ne=Object.assign(_e,{setup:a=>(a,t)=>(w(),I(e,{height:"600px"},{default:$((()=>[b(xe)])),_:1}))});export{Ne as default};
