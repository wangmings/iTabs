import{a4 as e,bs as a,ay as n,W as t,X as l,bu as u,cI as r,bG as s,bJ as o,k as i,r as c,cC as p,bz as d,Q as m,bK as b,cD as v,cE as N,aY as f,as as h,ax as g,bB as I,cG as V,aG as y,aH as w,b3 as x,A as S,bo as A,a2 as k,b1 as E,U as F,V as D,bp as B,bF as z}from"./el-button.0a4ba32a.js";import{E as C}from"./el-input.b3ba137c.js";import{R as j}from"./index.a7f52680.js";import{a as M}from"./arrow-up.0ae35c9a.js";import{a as R}from"./arrow-down.766403d3.js";import{p as _}from"./plus.408c9cf2.js";const K=e({name:"Minus"}),G={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},P=[l("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64z"},null,-1)];const T=z(I(e({name:"ElInputNumber",components:{ElInput:C,ElIcon:o,ArrowUp:M,ArrowDown:R,Plus:_,Minus:a(K,[["render",function(e,a,l,u,r,s){return n(),t("svg",G,P)}]])},directives:{RepeatClick:j},props:u({step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:{type:Number},disabled:{type:Boolean,default:!1},size:{type:String,values:r},controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)}}),emits:{change:(e,a)=>e!==a,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,input:e=>s(e),"update:modelValue":e=>s(e)||void 0===e},setup(e,{emit:a}){const n=i(),t=c({currentValue:e.modelValue,userInput:null}),{formItem:l}=p(),u=d("input-number"),r=m((()=>E(e.modelValue,-1)<e.min)),o=m((()=>E(e.modelValue)>e.max)),I=m((()=>{const a=k(e.step);return b(e.precision)?Math.max(k(e.modelValue),a):(e.precision,e.precision)})),y=m((()=>e.controls&&"right"===e.controlsPosition)),w=v(),x=N(),S=m((()=>{if(null!==t.userInput)return t.userInput;let a=t.currentValue;if(s(a)){if(Number.isNaN(a))return"";b(e.precision)||(a=a.toFixed(e.precision))}return a})),A=(e,a)=>(b(a)&&(a=I.value),Number.parseFloat(""+Math.round(e*10**a)/10**a)),k=e=>{if(b(e))return 0;const a=e.toString(),n=a.indexOf(".");let t=0;return-1!==n&&(t=a.length-n-1),t},E=(a,n=1)=>s(a)?(a=s(a)?a:Number.NaN,A(a+e.step*n)):t.currentValue,F=(n,t)=>{const{max:l,min:u,step:r,precision:s,stepStrictly:o}=e;let i=Number(n);return null===n&&(i=Number.NaN),Number.isNaN(i)||(o&&(i=Math.round(i/r)*r),b(s)||(i=A(i,s)),(i>l||i<u)&&(i=i>l?l:u,t&&a("update:modelValue",i))),i},D=e=>{var n;const u=t.currentValue;let r=F(e);u!==r&&(Number.isNaN(r)&&(r=void 0),t.userInput=null,a("update:modelValue",r),a("input",r),a("change",r,u),null==(n=null==l?void 0:l.validate)||n.call(l,"change").catch((e=>V())),t.currentValue=r)};return f((()=>e.modelValue),(e=>{const a=F(e,!0);t.currentValue=a,t.userInput=null}),{immediate:!0}),h((()=>{var l;const u=null==(l=n.value)?void 0:l.input;if(u.setAttribute("role","spinbutton"),u.setAttribute("aria-valuemax",String(e.max)),u.setAttribute("aria-valuemin",String(e.min)),u.setAttribute("aria-valuenow",String(t.currentValue)),u.setAttribute("aria-disabled",String(x.value)),!s(e.modelValue)){let n=Number(e.modelValue);Number.isNaN(n)&&(n=void 0),a("update:modelValue",n)}})),g((()=>{var e;const a=null==(e=n.value)?void 0:e.input;null==a||a.setAttribute("aria-valuenow",t.currentValue)})),{input:n,displayValue:S,handleInput:e=>t.userInput=e,handleInputChange:e=>{const a=""!==e?Number(e):"";(s(a)&&!Number.isNaN(a)||""===e)&&D(a),t.userInput=null},controlsAtRight:y,decrease:()=>{if(x.value||r.value)return;const a=e.modelValue||0,n=E(a,-1);D(n)},increase:()=>{if(x.value||o.value)return;const a=e.modelValue||0,n=E(a);D(n)},inputNumberSize:w,inputNumberDisabled:x,maxDisabled:o,minDisabled:r,focus:()=>{var e,a;null==(a=null==(e=n.value)?void 0:e.focus)||a.call(e)},blur:()=>{var e,a;null==(a=null==(e=n.value)?void 0:e.blur)||a.call(e)},handleFocus:e=>{a("focus",e)},handleBlur:e=>{var n;a("blur",e),null==(n=null==l?void 0:l.validate)||n.call(l,"blur").catch((e=>V()))},ns:u}}}),[["render",function(e,a,l,u,r,s){const o=y("arrow-down"),i=y("minus"),c=y("el-icon"),p=y("arrow-up"),d=y("plus"),m=y("el-input"),b=w("repeat-click");return n(),t("div",{class:S([e.ns.b(),e.ns.m(e.inputNumberSize),e.ns.is("disabled",e.inputNumberDisabled),e.ns.is("without-controls",!e.controls),e.ns.is("controls-right",e.controlsAtRight)]),onDragstart:a[2]||(a[2]=B((()=>{}),["prevent"]))},[e.controls?x((n(),t("span",{key:0,role:"button",class:S([e.ns.e("decrease"),e.ns.is("disabled",e.minDisabled)]),onKeydown:a[0]||(a[0]=A(((...a)=>e.decrease&&e.decrease(...a)),["enter"]))},[k(c,null,{default:E((()=>[e.controlsAtRight?(n(),F(o,{key:0})):(n(),F(i,{key:1}))])),_:1})],34)),[[b,e.decrease]]):D("v-if",!0),e.controls?x((n(),t("span",{key:1,role:"button",class:S([e.ns.e("increase"),e.ns.is("disabled",e.maxDisabled)]),onKeydown:a[1]||(a[1]=A(((...a)=>e.increase&&e.increase(...a)),["enter"]))},[k(c,null,{default:E((()=>[e.controlsAtRight?(n(),F(p,{key:0})):(n(),F(d,{key:1}))])),_:1})],34)),[[b,e.increase]]):D("v-if",!0),k(m,{ref:"input",type:"number",step:e.step,"model-value":e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[A(B(e.increase,["prevent"]),["up"]),A(B(e.decrease,["prevent"]),["down"])],onBlur:e.handleBlur,onFocus:e.handleFocus,onInput:e.handleInput,onChange:e.handleInputChange},null,8,["step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown","onBlur","onFocus","onInput","onChange"])],34)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]));export{T as E};
