var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,i=(e,a)=>{for(var t in a||(a={}))l.call(a,t)&&n(e,t,a[t]);if(o)for(var t of o(a))s.call(a,t)&&n(e,t,a[t]);return e},r=(e,o)=>a(e,t(o));import{_ as u}from"./d-dialog.ed95f2b9.js";import{bu as d,bv as p,d4 as c,bC as m,bH as g,bw as f,a4 as v,bz as y,aS as b,k as h,Q as k,cT as _,bq as x,d7 as w,as as j,ay as S,U as $,b1 as C,X as O,a2 as L,x as A,W as E,bJ as B,A as I,dR as P,aE as F,aF as T,a1 as V,D as q,I as z,C as K,$ as R,ak as W,bo as U,bp as D,f as H,bB as N,al as Q,dM as G,bS as J,bF as M,c4 as X,r as Y,c0 as Z,bx as ee,aG as ae,aH as te,b3 as oe,V as le,bn as se,aB as ne,az as ie}from"./el-button.0a4ba32a.js";import{O as re,k as ue,Q as de,R as pe,T as ce,U as me}from"./main.858372aa.js";import{E as ge}from"./el-skeleton-item.1896e7e8.js";import{u as fe,E as ve}from"./el-input.b3ba137c.js";import{E as ye}from"./el-scrollbar.3e84cd99.js";import"./el-popper.7e8f10c3.js";import{E as be}from"./el-image-viewer.f9924215.js";import{E as he,a as ke}from"./el-tabs.0374e920.js";import{u as _e,g as xe,E as we}from"./index.f364da82.js";import{u as je}from"./deprecation.bfd0cf7f.js";import"./el-dialog.4b8a03dc.js";import"./el-overlay.ebdea840.js";import"./index.8dc67c0c.js";import"./typescript.72bf8adc.js";import"./zoom-in.dd934e7d.js";import"./index.c956e740.js";import"./plus.408c9cf2.js";import"./event.0bae16b8.js";const Se=d({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:p(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:p([Function,Array]),default:c},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},popperAppendToBody:{type:Boolean,default:void 0},teleported:_e.teleported,highlightFirstItem:{type:Boolean,default:!1}}),$e={[m]:e=>g(e),input:e=>g(e),change:e=>g(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>f(e)},Ce=["aria-expanded","aria-owns"],Oe={key:0},Le=["id","aria-selected","onClick"];const Ae=M(N(v(r(i({},{name:"ElAutocomplete",inheritAttrs:!1}),{props:Se,emits:$e,setup(e,{expose:a,emit:t}){const o=e,l="ElAutocomplete",s=y("autocomplete"),{compatTeleported:n}=je(l,"popperAppendToBody");let i=!1;const r=fe(),u=b(),d=h([]),p=h(-1),c=h(""),g=h(!1),f=h(!1),v=h(!1),N=h(),M=h(),X=h(),Y=h(),Z=k((()=>s.b(String(xe())))),ee=k((()=>u.style)),ae=k((()=>(_(d.value)&&d.value.length>0||v.value)&&g.value)),te=k((()=>!o.hideLoading&&v.value)),oe=()=>{Q((()=>{ae.value&&(c.value=`${N.value.$el.offsetWidth}px`)}))},le=x((e=>{if(f.value)return;v.value=!0;const a=e=>{v.value=!1,f.value||(_(e)?(d.value=e,p.value=o.highlightFirstItem?0:-1):J(l,"autocomplete suggestions must be an array"))};if(_(o.fetchSuggestions))a(o.fetchSuggestions);else{const t=o.fetchSuggestions(e,a);_(t)?a(t):G(t)&&t.then(a)}}),o.debounce),se=e=>{const a=Boolean(e);if(t("input",e),t(m,e),f.value=!1,g.value||(g.value=i&&a),!o.triggerOnFocus&&!e)return f.value=!0,void(d.value=[]);i&&a&&(i=!1),le(e)},ne=e=>{t("change",e)},ie=e=>{g.value=!0,t("focus",e),o.triggerOnFocus&&le(String(o.modelValue))},re=e=>{t("blur",e)},ue=()=>{g.value=!1,i=!0,t(m,""),t("clear")},de=()=>{ae.value&&p.value>=0&&p.value<d.value.length?ce(d.value[p.value]):o.selectWhenUnmatched&&(t("select",{value:o.modelValue}),Q((()=>{d.value=[],p.value=-1})))},pe=()=>{g.value=!1},ce=e=>{t("input",e[o.valueKey]),t(m,e[o.valueKey]),t("select",e),Q((()=>{d.value=[],p.value=-1}))},me=e=>{if(!ae.value||v.value)return;if(e<0)return void(p.value=-1);e>=d.value.length&&(e=d.value.length-1);const a=M.value.querySelector(`.${s.be("suggestion","wrap")}`),t=a.querySelectorAll(`.${s.be("suggestion","list")} li`)[e],o=a.scrollTop,{offsetTop:l,scrollHeight:n}=t;l+n>o+a.clientHeight&&(a.scrollTop+=n),l<o&&(a.scrollTop-=n),p.value=e,N.value.ref.setAttribute("aria-activedescendant",`${Z.value}-item-${p.value}`)};return w(Y,pe),j((()=>{N.value.ref.setAttribute("role","textbox"),N.value.ref.setAttribute("aria-autocomplete","list"),N.value.ref.setAttribute("aria-controls","id"),N.value.ref.setAttribute("aria-activedescendant",`${Z.value}-item-${p.value}`)})),a({highlightedIndex:p,activated:g,loading:v,inputRef:N,popperRef:X,suggestions:d,handleSelect:ce,handleKeyEnter:de,focus:()=>{var e;null==(e=N.value)||e.focus()},close:pe,highlight:me}),(e,a)=>(S(),$(A(we),{ref_key:"popperRef",ref:X,visible:A(ae),"onUpdate:visible":a[2]||(a[2]=e=>H(ae)?ae.value=e:null),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[A(s).e("popper"),e.popperClass],teleported:A(n),"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${A(s).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:oe},{content:C((()=>[O("div",{ref_key:"regionRef",ref:M,class:I([A(s).b("suggestion"),A(s).is("loading",A(te))]),style:K({minWidth:c.value,outline:"none"}),role:"region"},[L(A(ye),{id:A(Z),tag:"ul","wrap-class":A(s).be("suggestion","wrap"),"view-class":A(s).be("suggestion","list"),role:"listbox"},{default:C((()=>[A(te)?(S(),E("li",Oe,[L(A(B),{class:I(A(s).is("loading"))},{default:C((()=>[L(A(P))])),_:1},8,["class"])])):(S(!0),E(z,{key:1},F(d.value,((a,t)=>(S(),E("li",{id:`${A(Z)}-item-${t}`,key:t,class:I({highlighted:p.value===t}),role:"option","aria-selected":p.value===t,onClick:e=>ce(a)},[T(e.$slots,"default",{item:a},(()=>[V(q(a[e.valueKey]),1)]))],10,Le)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:C((()=>[O("div",{ref_key:"listboxRef",ref:Y,class:I([A(s).b(),e.$attrs.class]),style:K(A(ee)),role:"combobox","aria-haspopup":"listbox","aria-expanded":A(ae),"aria-owns":A(Z)},[L(A(ve),W({ref_key:"inputRef",ref:N},A(r),{"model-value":e.modelValue,onInput:se,onChange:ne,onFocus:ie,onBlur:re,onClear:ue,onKeydown:[a[0]||(a[0]=U(D((e=>me(p.value-1)),["prevent"]),["up"])),a[1]||(a[1]=U(D((e=>me(p.value+1)),["prevent"]),["down"])),U(de,["enter"]),U(pe,["tab"])]}),R({_:2},[e.$slots.prepend?{name:"prepend",fn:C((()=>[T(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:C((()=>[T(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:C((()=>[T(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:C((()=>[T(e.$slots,"suffix")]))}:void 0]),1040,["model-value","onKeydown"])],14,Ce)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}})),[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]));const Ee=e=>(ne("data-v-2c61d0e7"),e=e(),ie(),e),Be={class:"remai-content hfull"},Ie={style:{"background-color":"var(--bg-card)"}},Pe={class:"ac pt10 d-flex-between remai-search"},Fe={class:"remai-search",style:{"margin-top":"4px"}},Te=["onClick"],Ve={class:"pl20 pr20"},qe={class:"d-layout hfull bt",style:{height:"calc(100% - 60px)","margin-top":"0px"}},ze={class:"d-layout-content mt10 d-auto-y ml10",style:{height:"calc(100% - 60px)"},"infinite-scroll-delay":"500","infinite-scroll-immediate":!1},Ke={key:0,class:"mb10"},Re=V(" 为您找到 "),We={style:{color:"#e74737"}},Ue=V(" 相关的结果 "),De={style:{color:"#e74737"}},He=V("个 "),Ne={class:"remai-body d-flex"},Qe=["onClick"],Ge={style:{padding:"16px"}},Je=["title"],Me={class:"price"},Xe=Ee((()=>O("em",{class:"f12",style:{"vertical-align":"-2px"}},"券后￥",-1))),Ye={class:"f16 b",style:{"vertical-align":"-2px"}},Ze={class:"fr couponlink"},ea={class:"ac"},aa=V("加载更多"),ta={name:"appRemai"};var oa=X({name:"remai",components:{Content:X(Object.assign(ta,{setup(e){const a=Y({category:"jd_today_top",categoryList:[{name:"热卖",api:"jd_today_top"},{name:"好货",api:"jd_goods"},{name:"9块9",api:"jd_nine"},{name:"排行",api:"jd_subsidy_goods"},{name:"京东拼购",api:"jd_collage"},{name:"京东自营",api:"jd_self"}],hotSearch:[],total_count:0,goodsOptions:[],goodList:[],loading:!1,moreLoading:!1,rowData:{},queryParams:{pageIndex:1,pageSize:24}});function t(){l(1)}const o=e=>{a.keyword="",1==e?(a.queryParams.pageIndex++,a.moreLoading=!0):(a.loading=!0,a.queryParams.pageIndex=1),de[a.category](r(i({},a.queryParams),{v:"v2"})).then((t=>{let o=t.data||t.brand_list||[];a.goodList=1==e?[...a.goodList,...o]:o})).finally((()=>{a.loading=!1,a.moreLoading=!1}))};function l(e){a.keyword?n(e):o(e)}o(),re({v:"v1"}).then((e=>{a.hotSearch=e.hotWords||[],Z.set("jdHotSearchTime",ee().valueOf())}));const s=(e,t)=>{e||!a.hotWords?ce({word:e,v:"v1"}).then((e=>{t((e||[]).map((e=>({value:e.kw}))))})):cd(a.hotWords)};function n(e){1==e?(a.queryParams.pageIndex++,a.moreLoading=!0):(a.loading=!0,a.queryParams.pageIndex--),me(r(i({},a.queryParams),{keyword:a.keyword,v:"v2"})).then((t=>{let o=t.data||[];a.goodList=1==e?[...a.goodList,...o]:o,a.total_count=t.total_count||0})).finally((()=>{a.loading=!1,a.moreLoading=!1}))}return(e,i)=>{const r=ae("el-icon"),u=ae("d-button"),d=te("infinite-scroll");return S(),E("div",Be,[O("div",Ie,[O("div",Pe,[L(A(Ae),{size:"default",style:{width:"100%"},modelValue:A(a).keyword,"onUpdate:modelValue":i[0]||(i[0]=e=>A(a).keyword=e),filterable:"",remote:"",onKeyup:U(n,["enter"]),onChange:n,"reserve-keyword":"",placeholder:"粘贴商品标题，先领取再购物","fetch-suggestions":s},null,8,["modelValue","onKeyup"]),O("button",{class:"d-button",onClick:n},[L(r,{size:16},{default:C((()=>[L(A(ue))])),_:1})])]),O("p",Fe,[(S(!0),E(z,null,F(A(a).hotSearch,(e=>(S(),E("span",{onClick:t=>{return o=e,a.keyword=o,void n();var o},class:"f12 hot d-sub",key:e},q(e),9,Te)))),128))]),O("div",Ve,[L(A(ke),{onTabClick:o,modelValue:A(a).category,"onUpdate:modelValue":i[1]||(i[1]=e=>A(a).category=e)},{default:C((()=>[(S(!0),E(z,null,F(A(a).categoryList,(e=>(S(),$(A(he),{label:e.name,name:e.api,key:e.api},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])])]),O("div",qe,[oe((S(),E("div",ze,[A(a).keyword?(S(),E("p",Ke,[Re,O("span",We,q(A(a).keyword),1),Ue,O("span",De,q(A(a).total_count),1),He])):le("",!0),O("ul",Ne,[L(A(ge),{loading:A(a).loading,rows:3,count:1,animated:""},{default:C((()=>[(S(!0),E(z,null,F(A(a).goodList,(e=>(S(),E("li",{onClick:a=>function(e){let a={gid:e.goods_link,unionid:1000360070,positionid:3004143482};pe(a).then((e=>{window.open(e.link,"_blank")}))}(e),class:"remai-item",key:e.goods_id,target:"_blank"},[L(A(be),{fit:"cover",lazy:"",style:{height:"204px"},class:"hfull wfull",src:e.goods_img},null,8,["src"]),O("div",Ge,[O("p",{class:"title",title:e.short_name||e.jd_title},q(e.short_name),9,Je),O("p",Me,[Xe,O("em",Ye,q(e.final_price),1),O("a",Ze,"领"+q(e.discount_price)+"元券",1)])])],8,Qe)))),128))])),_:1},8,["loading"])]),O("div",ea,[oe(L(u,{onClick:i[2]||(i[2]=e=>l(1)),loading:A(a).moreLoading,style:{width:"120px"},size:"small"},{default:C((()=>[aa])),_:1},8,["loading"]),[[se,!A(a).loading]])])])),[[d,t]])])])}}}),[["__scopeId","data-v-2c61d0e7"]]),DDialog:u},setup:(e,a)=>({})},[["render",function(e,a,t,o,l,s){const n=ae("content"),i=ae("d-dialog");return S(),$(i,{height:"640px",destroyOnClose:!0},{default:C((()=>[L(n)])),_:1})}]]);export{oa as default};
