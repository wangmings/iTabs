import{_ as e}from"./d-dialog.ed95f2b9.js";import{a4 as o,ay as a,U as t,a2 as l,c4 as s,cs as d,r,k as n,aY as i,Q as c,aG as u,W as p,b1 as m,x as f,V as b,b7 as v,I as j,aE as h,X as x,A as y,C as g,bp as V,bx as _,b3 as w,bm as k,bo as C,aB as L,az as U,ci as Y}from"./el-button.0a4ba32a.js";import"./el-popover.5fb0ff22.js";import"./el-popper.7e8f10c3.js";import{E as z,a as E,b as M}from"./el-main.5911d2a1.js";import{E as D}from"./el-input.b3ba137c.js";import{E as I}from"./el-date-picker.cb28eb4e.js";import"./el-scrollbar.3e84cd99.js";import{_ as O}from"./d-color.c1dcbbce.js";import{a1 as T,s as A,P as q}from"./main.858372aa.js";import{E as B}from"./index.2ebbd8b1.js";import"./el-dialog.4b8a03dc.js";import"./el-overlay.ebdea840.js";import"./index.8dc67c0c.js";import"./typescript.72bf8adc.js";import"./index.a7f52680.js";import"./event.0bae16b8.js";import"./arrow-up.0ae35c9a.js";import"./arrow-down.766403d3.js";import"./index.b9023f44.js";import"./validator.053f84bf.js";import"./index.f364da82.js";import"./isEqual.6fce44d5.js";import"./_baseIsEqual.220044e7.js";import"./_Uint8Array.d6bc81f7.js";import"./deprecation.bfd0cf7f.js";import"./index.c956e740.js";var F=o({name:"MoreFilled"});const K={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},R=l("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224z"},null,-1);F.render=function(e,o,l,s,d,r){return a(),t("svg",K,[R])},F.__file="packages/components/MoreFilled.vue";var G=F;const P=e=>(L("data-v-1c5a1e90"),e=e(),U(),e),Q={class:"todo-wrap d-layout"},W=P((()=>x("p",{class:"d-left-tabs-item"},"所有待办",-1))),X={key:0,class:"mt10 f12 pl20"},$=["onClick"],H={class:"d-cell d-hidden d-main"},J={style:{width:"50px",height:"34px"}},N={class:"todo-add"},S=["onKeyup"],Z=P((()=>x("span",{class:"toto-add-line"},null,-1))),ee=[P((()=>x("source",{src:"./audio/complete.wav"},null,-1)))];var oe=s({setup(e){const o=d(),s=r({inputValue:"",todoList:[],sortTodo:[]});function L(e){let o=_(`${e} 23:59:59`).valueOf();return!!e&&_().valueOf()>o}const U=n(null);s.todoList=o.value;i((()=>s.todoList),(e=>{e=e||[],s.sortTodo=e.sort(((e,o)=>e.done-o.done))}),{deep:!0,immediate:!0});const F=()=>{if(!s.inputValue)return;let e={content:s.inputValue,expire:_().format("YYYY-MM-DD"),color:"",done:!1,ct:_().valueOf()};s.todoList.unshift(e),s.inputValue="",K()};function K(){o.value=s.todoList,Y("todo")}const R=c((()=>100*(s.todoList||[]).filter((e=>e.done)).length/s.todoList.length+"%"));return(e,o)=>{const d=u("el-icon");return a(),p("div",Q,[l(f(M),{class:"d-layout hfull"},{default:m((()=>[l(f(z),{class:"d-left-tabs pt30",style:{"background-color":"var(--bg-info)",width:"160px"}},{default:m((()=>[W])),_:1}),l(f(E),{class:"todo-content pr10 hfull"},{default:m((()=>[f(s).todoList.length?b("",!0):(a(),p("div",X,"赶快添加您的第一条待办吧")),l(v,{tag:"ul",name:"list-complete",class:"todo-content-ul d-sub"},{default:m((()=>[(a(!0),p(j,null,h(f(s).sortTodo,((e,o)=>(a(),p("li",{class:"todo-content-li",key:e},[x("button",{class:y(["todo-check",{done:e.done}]),style:g({borderColor:e.color}),onClick:V((o=>(e=>{e.done=!e.done,e.done&&(U.value.load(),U.value.play()),K()})(e)),["prevent"])},[l(d,{class:"todo-icon-check"},{default:m((()=>[l(f(T))])),_:1})],14,$),x("div",H,[l(f(D),{autosize:{minRows:1,maxRows:10},type:"textarea",size:"small",onInput:K,class:y(["todo-text",{done:e.done}]),modelValue:e.content,"onUpdate:modelValue":o=>e.content=o},null,8,["class","modelValue","onUpdate:modelValue"]),l(f(I),{onChange:o=>e.focus=!1,clearable:!1,class:y(["item-expire",{isExpire:L(e.expire)}]),"value-format":"YYYY-MM-DD",size:"small",modelValue:e.expire,"onUpdate:modelValue":o=>e.expire=o,type:"date",style:{"--el-input-hover-border-color":"transparent","--el-input-focus-border-color":"transparent"},placeholder:"-"},null,8,["onChange","class","modelValue","onUpdate:modelValue"])]),x("div",J,[e.done?b("",!0):(a(),t(f(B),{key:0,placement:"bottom-end",width:200,trigger:"hover"},{reference:m((()=>[l(d,null,{default:m((()=>[l(f(G))])),_:1})])),default:m((()=>[x("div",null,[l(O,{title:"优先级",custom:!1,modelValue:e.color,"onUpdate:modelValue":o=>e.color=o,colors:["#e03131","#ffb000","#4772fa","var(--d-sub)"]},null,8,["modelValue","onUpdate:modelValue","colors"])])])),_:2},1024)),l(d,{class:"ml10 mr10",title:"删除",onClick:e=>(e=>{s.todoList.splice(e,1),K()})(o)},{default:m((()=>[l(f(A))])),_:2},1032,["onClick"])])])))),128))])),_:1}),x("div",N,[l(d,{size:16,class:"todo-add-icon d-sub"},{default:m((()=>[l(f(q))])),_:1}),w(x("input",{autofocus:"autofocus",class:"todo-add-input bb",type:"text",onKeyup:C(F,["enter"]),placeholder:"添加任务","onUpdate:modelValue":o[0]||(o[0]=e=>f(s).inputValue=e)},null,40,S),[[k,f(s).inputValue,void 0,{trim:!0}]]),Z])])),_:1})])),_:1}),x("div",{class:"todo-progress",style:g({width:f(R)})},[x("audio",{class:"d-hidden",ref_key:"refAudio",ref:U},ee,512)],4)])}}},[["__scopeId","data-v-1c5a1e90"]]);const ae={name:"appTodo"},te=Object.assign(ae,{setup:o=>(o,s)=>(a(),t(e,{height:"600px"},{default:m((()=>[l(oe)])),_:1}))});export{te as default};
