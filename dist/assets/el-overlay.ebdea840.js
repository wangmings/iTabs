var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(o,t,l)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[t]=l;import{f as u,bS as d,bW as r,dk as c,aY as p,bY as i,dl as y,bZ as f,o as b,bV as m,cQ as v,cO as E,d4 as S,bu as g,bv as C,a4 as T,bz as O,a2 as h,aF as M,ac as A,cB as D,bC as k,cU as x,bX as B,k as N,Q as P,bG as I,al as L,as as w,a9 as R,dm as Y}from"./el-button.0a4ba32a.js";var _=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(_||{});const F=e=>{if(u(e)||d("[useLockscreen]","You need to pass a ref param to this function"),!r||c(document.body,"el-popup-parent--hidden"))return;let o=0,t=!1,l="0",a=0;const n=()=>{m(document.body,"el-popup-parent--hidden"),t&&(document.body.style.paddingRight=l)};p(e,(e=>{if(!e)return void n();t=!c(document.body,"el-popup-parent--hidden"),t&&(l=document.body.style.paddingRight,a=Number.parseInt(i(document.body,"paddingRight"),10)),o=y();const s=document.documentElement.clientHeight<document.body.scrollHeight,u=i(document.body,"overflowY");o>0&&(s||"scroll"===u)&&t&&(document.body.style.paddingRight=`${a+o}px`),f(document.body,"el-popup-parent--hidden")})),b((()=>n()))},z=[],j=(e,o)=>{p(o,(o=>{o?z.push(e):z.splice(z.indexOf(e),1)}))};r&&v(document,"keydown",(e=>{if(0!==z.length&&e.code===E.esc){e.stopPropagation();z[z.length-1].handleClose()}}));const H=(e,o)=>{let t;p((()=>e.value),(e=>{var l,a;e?(t=document.activeElement,u(o)&&(null==(a=(l=o.value).focus)||a.call(l))):t.focus()}))},G=e=>{if(!e)return{onClick:S,onMousedown:S,onMouseup:S};let o=!1,t=!1;return{onClick:l=>{o&&t&&e(l),o=t=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{t=e.target===e.currentTarget}}};const V=T({name:"ElOverlay",props:g({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:C([String,Array,Object])},zIndex:{type:C([String,Number])}}),emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:t}){const l=O("overlay"),{onClick:a,onMousedown:n,onMouseup:s}=G(e.customMaskEvent?void 0:e=>{t("click",e)});return()=>e.mask?h("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:n,onMouseup:s},[M(o,"default")],_.STYLE|_.CLASS|_.PROPS,["onClick","onMouseup","onMousedown"]):A("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[M(o,"default")])}}),U=g({center:{type:Boolean,default:!1},closeIcon:{type:D,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),K={close:()=>!0},X=g((Q=((e,o)=>{for(var t in o||(o={}))a.call(o,t)&&s(e,t,o[t]);if(l)for(var t of l(o))n.call(o,t)&&s(e,t,o[t]);return e})({},U),Z={appendToBody:{type:Boolean,default:!1},beforeClose:{type:C(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,required:!0},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}},o(Q,t(Z))));var Q,Z;const $={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[k]:e=>x(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},q=(e,o)=>{const t=R().emit,{nextZIndex:l}=B();let a="";const n=N(!1),s=N(!1),u=N(!1),d=N(e.zIndex||l());let c,i;const y=P((()=>I(e.width)?`${e.width}px`:e.width)),f=P((()=>{const o={};return e.fullscreen||(e.top&&(o["--el-dialog-margin-top"]=e.top),e.width&&(o["--el-dialog-width"]=y.value)),o}));function b(){null==i||i(),null==c||c(),e.openDelay&&e.openDelay>0?({stop:c}=Y((()=>E()),e.openDelay)):E()}function m(){null==c||c(),null==i||i(),e.closeDelay&&e.closeDelay>0?({stop:i}=Y((()=>S()),e.closeDelay)):S()}function v(){e.beforeClose?e.beforeClose((function(e){e||(s.value=!0,n.value=!1)})):m()}function E(){r&&(n.value=!0)}function S(){n.value=!1}return e.lockScroll&&F(n),e.closeOnPressEscape&&j({handleClose:v},n),H(n),p((()=>e.modelValue),(a=>{a?(s.value=!1,b(),u.value=!0,t("open"),d.value=e.zIndex?d.value++:l(),L((()=>{o.value&&(o.value.scrollTop=0)}))):n.value&&m()})),p((()=>e.fullscreen),(e=>{o.value&&(e?(a=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=a)})),w((()=>{e.modelValue&&(n.value=!0,u.value=!0,b())})),{afterEnter:function(){t("opened")},afterLeave:function(){t("closed"),t(k,!1),e.destroyOnClose&&(u.value=!1)},beforeLeave:function(){t("close")},handleClose:v,onModalClick:function(){e.closeOnClickModal&&v()},close:m,doClose:S,closed:s,style:f,rendered:u,visible:n,zIndex:d}};export{V as E,K as a,X as b,$ as c,U as d,G as e,j as f,F as g,H as h,q as u};
