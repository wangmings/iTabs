import{u as e,b as a,o as t,$ as n,d as l,f as s,h as o}from"./main.858372aa.js";import{d as i}from"./index.6363f97d.js";import{k as p,b$ as r,r as c,al as u,c0 as m,ci as d,aw as f,ay as w,U as k,x as g}from"./el-button.0a4ba32a.js";import{r as y}from"./wallpaper.344da765.js";const h={setup(h){const v=e(),x=p(null),b=r(),{t:D}=a(),j=c({contextmenuData:[{name:D("addIcon"),key:"add",icon:"plus"},{name:D("changeWallpaper"),key:"switchWallpaper",icon:"switch"},{name:D("downWallpaper"),key:"download",icon:"download",group:!0},{name:D("setting"),key:"setting",icon:"setting"},{name:"立即备份",key:"backups",icon:"cloudy"},{name:"本地搜索",key:"search",icon:"search"}]});u((()=>{t(n("#app-main"),"contextmenu",C)}));let T=b.value.wallpaper.time;if(T){let e=m.get("wallpaperSwitchTime"),a=(new Date).getTime();e+=36e5*T,e<a&&(W(),m.set("wallpaperSwitchTime",a))}function W(){y({t:(new Date).getTime()}).then((e=>{let a=e.data||"";b.value.wallpaper.src=a,b.value.wallpaper.thumb="",b.value.wallpaper.type=1,d("baseConfig")}))}function C(e){e.preventDefault(),e.stopPropagation(),x.value.open(e)}function I(e){if("add"==e.key)v.setDialogIcon();else if("switchWallpaper"==e.key)W();else if("download"==e.key){let e=b.value.wallpaper;if(!e.src)return;i(e.src,e.name)}else if("setting"==e.key)v.setSettingHandle(2);else if("backups"==e.key){if(!m.get("token"))return void v.setLoginInfo("login");d(null,100,"manua")}else"search"==e.key&&(o.value=!0)}return f((()=>{l(n("#app-main"),"contextmenu",C)})),(e,a)=>(w(),k(s,{uid:"home_5dwx",data:g(j).contextmenuData,onClick:I,ref_key:"refContextmenu",ref:x},null,8,["data"]))}};export{h as default};
