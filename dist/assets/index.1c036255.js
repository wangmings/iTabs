var e=Object.defineProperty,o=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(o,n,a)=>n in o?e(o,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[n]=a,r=(e,o)=>{for(var n in o||(o={}))t.call(o,n)&&l(e,n,o[n]);if(a)for(var n of a(o))s.call(o,n)&&l(e,n,o[n]);return e};import{aY as i,cQ as c,a4 as u,bD as d,bJ as p,dx as m,by as f,bz as b,k as g,bX as v,r as y,Q as h,dy as C,cD as x,al as E,as as B,ao as w,cO as k,v as M,bB as O,aG as T,aH as P,ay as j,U as A,b1 as I,b3 as z,bn as S,a2 as V,X as _,W as $,A as H,aI as L,V as R,D,bo as K,bp as U,aF as F,C as W,a1 as Q,b6 as X,bW as Y,bH as G,ai as J,bw as Z,bK as q,bf as N,cY as ee,ac as oe}from"./el-button.0a4ba32a.js";import{E as ne}from"./el-input.b3ba137c.js";import{E as ae,f as te,g as se,h as le,e as re}from"./el-overlay.ebdea840.js";import{T as ie}from"./index.065a2d57.js";import{i as ce}from"./validator.053f84bf.js";import{u as ue}from"./index.8dc67c0c.js";import{o as de,a as pe}from"./event.0bae16b8.js";const me=u({name:"ElMessageBox",directives:{TrapFocus:ie},components:r({ElButton:d,ElInput:ne,ElOverlay:ae,ElIcon:p},m),inheritAttrs:!1,props:{buttonSize:{type:String,validator:ce},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:a}){const{t:t}=f(),s=b("message-box"),l=g(!1),{nextZIndex:u}=v(),d=y({beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:u()}),p=h((()=>{const e=d.type;return{[s.bm("icon",e)]:e&&C[e]}})),m=x(h((()=>e.buttonSize)),{prop:!0,form:!0,formItem:!0}),O=h((()=>d.icon||C[d.type]||"")),T=h((()=>!!d.message)),P=g(),j=g(),A=g(),I=g(),z=h((()=>d.confirmButtonClass));i((()=>d.inputValue),(async o=>{await E(),"prompt"===e.boxType&&null!==o&&L()}),{immediate:!0}),i((()=>l.value),(o=>{o&&("alert"!==e.boxType&&"confirm"!==e.boxType||E().then((()=>{var e,o,n;null==(n=null==(o=null==(e=I.value)?void 0:e.$el)?void 0:o.focus)||n.call(o)})),d.zIndex=u()),"prompt"===e.boxType&&(o?E().then((()=>{A.value&&A.value.$el&&R().focus()})):(d.editorErrorMessage="",d.validateError=!1))}));const S=h((()=>e.draggable));function V(){l.value&&(l.value=!1,E((()=>{d.action&&a("action",d.action)})))}ue(P,j,S),B((async()=>{await E(),e.closeOnHashChange&&de(window,"hashchange",V)})),w((()=>{e.closeOnHashChange&&pe(window,"hashchange",V)}));const _=()=>{e.closeOnClickModal&&H(d.distinguishCancelAndClose?"close":"cancel")},$=re(_),H=o=>{var n;("prompt"!==e.boxType||"confirm"!==o||L())&&(d.action=o,d.beforeClose?null==(n=d.beforeClose)||n.call(d,o,d,V):V())},L=()=>{if("prompt"===e.boxType){const e=d.inputPattern;if(e&&!e.test(d.inputValue||""))return d.editorErrorMessage=d.inputErrorMessage||t("el.messagebox.error"),d.validateError=!0,!1;const o=d.inputValidator;if("function"==typeof o){const e=o(d.inputValue);if(!1===e)return d.editorErrorMessage=d.inputErrorMessage||t("el.messagebox.error"),d.validateError=!0,!1;if("string"==typeof e)return d.editorErrorMessage=e,d.validateError=!0,!1}}return d.editorErrorMessage="",d.validateError=!1,!0},R=()=>{const e=A.value.$refs;return e.input||e.textarea},D=()=>{H("close")};return e.closeOnPressEscape?te({handleClose:D},l):((e,o,n)=>{const a=e=>{n(e)&&e.stopImmediatePropagation()};let t;i((()=>e.value),(e=>{e?t=c(document,o,a,!0):null==t||t()}),{immediate:!0})})(l,"keydown",(e=>e.code===k.esc)),e.lockScroll&&se(l),le(l),K=r({},M(d)),o(K,n({ns:s,overlayEvent:$,visible:l,hasMessage:T,typeClass:p,btnSize:m,iconComponent:O,confirmButtonClasses:z,rootRef:P,headerRef:j,inputRef:A,confirmRef:I,doClose:V,handleClose:D,handleWrapperClick:_,handleInputEnter:e=>{if("textarea"!==d.inputType)return e.preventDefault(),H("confirm")},handleAction:H,t:t}));var K}}),fe=["aria-label"],be={key:0},ge=["innerHTML"];var ve=O(me,[["render",function(e,o,n,a,t,s){const l=T("el-icon"),r=T("close"),i=T("el-input"),c=T("el-button"),u=T("el-overlay"),d=P("trap-focus");return j(),A(X,{name:"fade-in-linear",onAfterLeave:o[11]||(o[11]=o=>e.$emit("vanish"))},{default:I((()=>[z(V(u,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:I((()=>[_("div",{class:H(`${e.ns.namespace.value}-overlay-message-box`),onClick:o[8]||(o[8]=(...o)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...o)),onMousedown:o[9]||(o[9]=(...o)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...o)),onMouseup:o[10]||(o[10]=(...o)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...o))},[z((j(),$("div",{ref:"rootRef",role:"dialog","aria-label":e.title||"dialog","aria-modal":"true",class:H([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:W(e.customStyle),onClick:o[7]||(o[7]=U((()=>{}),["stop"]))},[null!==e.title&&void 0!==e.title?(j(),$("div",{key:0,ref:"headerRef",class:H(e.ns.e("header"))},[_("div",{class:H(e.ns.e("title"))},[e.iconComponent&&e.center?(j(),A(l,{key:0,class:H([e.ns.e("status"),e.typeClass])},{default:I((()=>[(j(),A(L(e.iconComponent)))])),_:1},8,["class"])):R("v-if",!0),_("span",null,D(e.title),1)],2),e.showClose?(j(),$("button",{key:0,type:"button",class:H(e.ns.e("headerbtn")),"aria-label":"Close",onClick:o[0]||(o[0]=o=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:o[1]||(o[1]=K(U((o=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),["prevent"]),["enter"]))},[V(l,{class:H(e.ns.e("close"))},{default:I((()=>[V(r)])),_:1},8,["class"])],34)):R("v-if",!0)],2)):R("v-if",!0),_("div",{class:H(e.ns.e("content"))},[_("div",{class:H(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(j(),A(l,{key:0,class:H([e.ns.e("status"),e.typeClass])},{default:I((()=>[(j(),A(L(e.iconComponent)))])),_:1},8,["class"])):R("v-if",!0),e.hasMessage?(j(),$("div",{key:1,class:H(e.ns.e("message"))},[F(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(j(),$("p",{key:1,innerHTML:e.message},null,8,ge)):(j(),$("p",be,D(e.message),1))]))],2)):R("v-if",!0)],2),z(_("div",{class:H(e.ns.e("input"))},[V(i,{ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":o[2]||(o[2]=o=>e.inputValue=o),type:e.inputType,placeholder:e.inputPlaceholder,class:H({invalid:e.validateError}),onKeydown:K(e.handleInputEnter,["enter"])},null,8,["modelValue","type","placeholder","class","onKeydown"]),_("div",{class:H(e.ns.e("errormsg")),style:W({visibility:e.editorErrorMessage?"visible":"hidden"})},D(e.editorErrorMessage),7)],2),[[S,e.showInput]])],2),_("div",{class:H(e.ns.e("btns"))},[e.showCancelButton?(j(),A(c,{key:0,loading:e.cancelButtonLoading,class:H([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:o[3]||(o[3]=o=>e.handleAction("cancel")),onKeydown:o[4]||(o[4]=K(U((o=>e.handleAction("cancel")),["prevent"]),["enter"]))},{default:I((()=>[Q(D(e.cancelButtonText||e.t("el.messagebox.cancel")),1)])),_:1},8,["loading","class","round","size"])):R("v-if",!0),z(V(c,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:H([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:o[5]||(o[5]=o=>e.handleAction("confirm")),onKeydown:o[6]||(o[6]=K(U((o=>e.handleAction("confirm")),["prevent"]),["enter"]))},{default:I((()=>[Q(D(e.confirmButtonText||e.t("el.messagebox.confirm")),1)])),_:1},8,["loading","class","round","disabled","size"]),[[S,e.showConfirmButton]])],2)],14,fe)),[[d]])],34)])),_:3},8,["z-index","overlay-class","mask"]),[[S,e.visible]])])),_:3})}],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const ye=new Map,he=(e,o)=>{const n=document.createElement("div");e.onVanish=()=>{N(null,n),ye.delete(t)},e.onAction=o=>{const n=ye.get(t);let s;s=e.showInput?{value:t.inputValue,action:o}:o,e.callback?e.callback(s,a.proxy):"cancel"===o||"close"===o?e.distinguishCancelAndClose&&"cancel"!==o?n.reject("close"):n.reject("cancel"):n.resolve(s)};const a=((e,o,n=null)=>{const a=oe(ve,e);return a.appContext=n,N(a,o),document.body.appendChild(o.firstElementChild),a.component})(e,n,o),t=a.proxy;for(const s in e)ee(e,s)&&!ee(t.$props,s)&&(t[s]=e[s]);return i((()=>t.message),((e,o)=>{J(e)?a.slots.default=()=>[e]:J(o)&&!J(e)&&delete a.slots.default}),{immediate:!0}),t.visible=!0,t};function Ce(e,o=null){if(!Y)return Promise.reject();let n;return G(e)||J(e)?e={message:e}:n=e.callback,new Promise(((a,t)=>{const s=he(e,null!=o?o:Ce._context);ye.set(s,{options:e,callback:n,resolve:a,reject:t})}))}const xe={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};["alert","confirm","prompt"].forEach((e=>{Ce[e]=function(e){return(o,n,a,t)=>{let s;return Z(n)?(a=n,s=""):s=q(n)?"":n,Ce(Object.assign(r({title:s,message:o,type:""},xe[e]),a,{boxType:e}),t)}}(e)})),Ce.close=()=>{ye.forEach(((e,o)=>{o.doClose()})),ye.clear()},Ce._context=null;const Ee=Ce;Ee.install=e=>{Ee._context=e._context,e.config.globalProperties.$msgbox=Ee,e.config.globalProperties.$messageBox=Ee,e.config.globalProperties.$alert=Ee.alert,e.config.globalProperties.$confirm=Ee.confirm,e.config.globalProperties.$prompt=Ee.prompt};const Be=Ee;export{Be as E};
